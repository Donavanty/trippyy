(this.webpackJsonptrippyy=this.webpackJsonptrippyy||[]).push([[0],{135:function(t,e,a){},288:function(t,e,a){t.exports=a(625)},314:function(t,e,a){},316:function(t,e,a){},328:function(t,e){},620:function(t,e,a){},621:function(t,e,a){},622:function(t,e,a){},623:function(t,e,a){},624:function(t,e,a){},625:function(t,e,a){"use strict";a.r(e);var n,r=a(0),i=a.n(r),o=a(31),s=a.n(o),c=a(13),l=a(6),u=a(7),p=a(9),d=a(8),m=a(43),h=a.n(m),v=a(162),g=function(t,e){return Object(v.a)(Object(v.a)({},t),e)},f="https://trippyy-backend.herokuapp.com/",y=function(t,e,a){return{token:t,type:"AUTH_SUCCESS",username:e,userId:a}},S=function(t){return{error:t,type:"AUTH_FAIL"}},E=function(t,e){return function(a){a({type:"AUTH_START"}),h.a.post(f+"api/authenticate/",{username:t,password:e}).then((function(e){var n=e.data.token,r=e.data.id,i={id:r,token:n,username:t};localStorage.setItem("user",JSON.stringify(i)),a(y(n,t,r))})).catch((function(t){a(S(t))}))}},b=function(){return function(t){var e=JSON.parse(localStorage.getItem("user"));if(void 0===e||null===e)t((localStorage.removeItem("user"),{type:"AUTH_LOGOUT"}));else{var a=e.token,n=e.username;t(y(a,n))}}},T=function(t,e,a,n,r){return function(i){i({type:"AUTH_START"}),i(function(t,e,a,n,r){var i={destination:t,tripName:"Trip to "+t+" from "+n+" to "+r,startDate:n,endDate:r};h.a.post(f+"api/trips/",i,{headers:{Authorization:"Token "+localStorage.token}}).then((function(t){return console.log(t)}));var o={country:t,lat:e,lng:a,startDate:n,endDate:r,activitiesAdded:[],activitiesAddedIds:[],itinerary:[[]]};return localStorage.setItem("trip",JSON.stringify(o)),{type:"NEW_TRIP",trip:o}}(t,e,a,n,r))}},A=function(){return null!==localStorage.trip&&void 0!==localStorage.trip?{type:"NEW_TRIP",trip:JSON.parse(localStorage.trip)}:{type:"AUTH_FAIL",error:"No trip found"}},C=function(t){return function(e){var a;if("TEXTSEARCH"===t.dataType)a="http://trippyy-backend.herokuapp.com/api/TextSearch/";else if("NEXTKEYSEARCH"===t.dataType)a="http://trippyy-backend.herokuapp.com/api/NextKeySearch/";else if("BOUNDEDTEXTSEARCH"===t.dataType)a="http:/trippyy-backend.herokuapp.com/api/BoundedTextSearch/";else{if("GOPREV"===t.dataType)return void e({type:"ACTIVITIES_LOAD",dataType:t.dataType,category:t.category});if("GONEXT"===t.dataType)return h.a.get("www.wikipedia.com").then((function(t){console.log("e")})),void e({type:"ACTIVITIES_LOAD",dataType:t.dataType,category:t.category})}h.a.post(a,t).then((function(a){var n;a=JSON.parse(a.data),console.log(a),n=a.next_page_token?a.next_page_token:-1;for(var r=a.results,i=0;i<r.length;i++)if(JSON.parse(localStorage.trip).activitiesAddedIds.includes(r[i].id)){var o=g(r[i],{added:!0});r[i]=o}e({type:"ACTIVITIES_LOAD",dataType:t.dataType,category:t.category,activitiesShown:r,nextPageToken:n})})).catch((function(a){alert(a),e({type:"ACTIVITIES_LOAD",dataType:t.dataType,category:t.category,activitiesShown:[]})}))}},N=function(t){return function(e){h.a.post("https:/trippyy-backend.herokuapp.com/api/algo/",t).then((function(t){var a=JSON.parse(t.data);e({type:"ITINERARY_LOAD",itinerary:a,getItineraryLoading:!1})}))}},O=a(10),w=(a(313),a(32)),k=(a(314),function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg",id:"nav1"},i.a.createElement(w.b,{to:"/",className:"navbar-brand",href:"#"},"trippyy"),i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"collapse navbar-collapse col-11",id:"navbar-nav"},i.a.createElement("ul",{className:"navbar-nav justify-content-center"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:"/",className:"nav-link"}," Home ")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:"/mytrips",className:"nav-link"}," My Trips",i.a.createElement("span",{className:"sr-only"},"(current)"))),this.props.isAuthenticated?i.a.createElement(i.a.Fragment,null,i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:"/",className:"nav-link",onClick:this.props.logout},"Logout")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:"/mytrips",className:"nav-link",id:"accountLink"},"Account: ",this.props.user.username))):i.a.createElement(i.a.Fragment,null,i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:{pathname:"/login",state:{from:this.props.from}},className:"nav-link",id:"loginLink"}," Login ")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(w.b,{to:"/signup",className:"nav-link",id:"signupLink"}," Signup "))))))}}]),a}(r.Component)),I=Object(O.b)((function(t){return{isAuthenticated:null!==t.user,user:t.user}}),(function(t){return{logout:function(){return t((localStorage.clear(),{type:"AUTH_LOGOUT"}))}}}))(k),L=(a(316),a(317),a(366),a(284)),j=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={startDate:null,endDate:null,focusedInput:null},n}return Object(u.a)(a,[{key:"render",value:function(){var t=this;return i.a.createElement(L.DateRangePicker,{startDateId:"startDate",endDateId:"endDate",startDate:this.state.startDate,endDate:this.state.endDate,onDatesChange:function(e){var a=e.startDate,n=e.endDate;t.setState({startDate:a,endDate:n}),console.log("Start: "),console.log(a),console.log("End: "),console.log(n),null!==n&&null!==a&&t.props.updateDates(a.format("YYYY-MM-DD"),n.format("YYYY-MM-DD"))},focusedInput:this.state.focusedInput,onFocusChange:function(e){t.setState({focusedInput:e})}})}}]),a}(r.Component),D=a(626),x=a(119),P=a.n(x),_=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).handleChange=function(t){n.setState({address:t}),n.props.updateCountry(t,null)},n.handleSelect=function(t){n.setState({address:t}),Object(x.geocodeByAddress)(t).then((function(t){return Object(x.getLatLng)(t[0])})).then((function(e){return n.props.updateCountry(t,e)})).catch((function(t){return console.log(t)}))},n.searchOptions={types:["(regions)"]},n.state={address:""},n}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement(P.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,searchOptions:this.searchOptions,highlightFirstSuggestion:!0},(function(t){var e=t.getInputProps,a=t.suggestions,n=t.getSuggestionItemProps,r=t.loading;return i.a.createElement("div",null,i.a.createElement("input",e({placeholder:"Search City",className:"location-search-input"})),i.a.createElement("div",{className:"autocomplete-dropdown-container"},r,a.map((function(t){var e=t.active?"suggestion-item--active":"suggestion-item",a=t.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return i.a.createElement("div",n(t,{className:e,style:a}),i.a.createElement("span",null,t.description))}))))}))}}]),a}(r.Component),R=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={newTripCreated:!1,goToShoppingPage:!1},t.updateDates=function(e,a){t.setState({startDate:e,endDate:a})},t.updateCountry=function(e,a){t.setState({countryName:e,latLng:a})},t.newTrip=function(e){null==t.state.startDate||null==t.state.endDate?alert("Please choose dates first!"):null==t.state.countryName||null==t.state.latLng?alert("Please select a country from the list!"):(e.preventDefault(),t.props.newTrip(t.state.countryName,t.state.latLng.lat,t.state.latLng.lng,t.state.startDate,t.state.endDate),t.setState({newTripCreated:!0}))},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e,a){!1===this.props.loading&&!0===this.state.newTripCreated&&this.props.history.push("/shopping")}},{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid align-items-center inputForm"},this.props.isAuthenticated?i.a.createElement("h1",null,"Hello, ",this.props.user.username,"!"):i.a.createElement("h1",null,"Hello stranger:)"),i.a.createElement("div",{className:"jumbotron"},i.a.createElement("form",{onSubmit:this.newTrip},i.a.createElement("div",null,i.a.createElement("h3",null," Enter Country: "),i.a.createElement(_,{updateCountry:this.updateCountry,name:"country"})),i.a.createElement("div",{className:"inputForm"},i.a.createElement("h3",null," Enter dates: "),i.a.createElement(j,{updateDates:this.updateDates})),i.a.createElement("div",{className:"inputForm"},this.props.loading?i.a.createElement(D.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement("button",null," Submit ")))))}}]),a}(r.Component),B=Object(O.b)((function(t){return{isAuthenticated:null!==t.user,user:t.user,loading:t.loading}}),(function(t){return{newTrip:function(e,a,n,r,i){return t(T(e,a,n,r,i))}}}))(R),U=(a(135),function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log(JSON.stringify(window.google)),this.props.onTryAutoSignup(),this.props.checkTrip()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement(B,{history:this.props.history}))}}]),a}(r.Component)),H=Object(O.b)((function(t){return{}}),(function(t){return{onTryAutoSignup:function(){return t(b())},checkTrip:function(){return t(A())}}}))(U),M=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).handleSubmit=function(e){e.preventDefault(),t.props.onAuth(e.target.username.value,e.target.password.value)},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup(),null!==localStorage.user&&void 0!==localStorage.user&&this.props.history.push("/")}},{key:"componentDidUpdate",value:function(t,e,a){if(this.props.isAuthenticated)if(void 0===this.props.location.state||null===this.props.location.state)this.props.history.push("/");else{var n=this.props.location.state.from;this.props.history.push(n),this.setState({from:null})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid align-items-center"},i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement("div",{className:"jumbotron startBox"},i.a.createElement("h1",null," Login"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"text",name:"username",placeholder:"Enter Username"})),i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password"})),this.props.loading?i.a.createElement(D.a,{animation:"border",role:"status",className:"element"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement("button",{className:"element",type:"submit",value:"Submit"}," Submit "))))}}]),a}(r.Component),F=Object(O.b)((function(t){return{isAuthenticated:null!==t.user,loading:t.loading}}),(function(t){return{onTryAutoSignup:function(){return t(b())},onAuth:function(e,a){return t(E(e,a))}}}))(M),Y=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).handleSubmit=function(e){e.preventDefault(),t.props.onAuth(e.target.username.value,e.target.email.value,e.target.password1.value,e.target.password2.value)},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup(),null!==localStorage.user&&void 0!==localStorage.user&&(alert("Please logout to create a new account"),this.props.history.push("/"))}},{key:"componentDidUpdate",value:function(t,e,a){this.props.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid align-items-center"},i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement("div",{className:"jumbotron startBox"},i.a.createElement("h1",null," SIGN UP"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"text",name:"username",placeholder:"Enter Username"})),i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"text",name:"email",placeholder:"Enter Email"})),i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"password",name:"password1",placeholder:"Enter Password"})),i.a.createElement("div",{className:"element"},i.a.createElement("input",{type:"password",name:"password2",placeholder:"Enter Password again"})),this.props.loading?i.a.createElement(D.a,{animation:"border",role:"status",className:"element"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement("button",{className:"element",type:"submit",value:"Submit"}," Submit "))))}}]),a}(r.Component),J=Object(O.b)((function(t){return{loading:t.loading,isAuthenticated:null!==t.user}}),(function(t){return{onAuth:function(e,a,n,r){return t(function(t,e,a,n){return function(r){r({type:"AUTH_START"}),h.a.post(f+"rest-auth/registration/",{username:t,email:e,password1:a,password2:n}).then((function(e){r(E(t,a))})).catch((function(t){r(S(t))}))}}(e,a,n,r))},onTryAutoSignup:function(){return t(b())}}}))(Y),G=a(41),V="https://trippyy-backend.herokuapp.com/",W=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={tripIDs:[],trips:[],local_loading:null},t.loadTrips=function(){try{var e=JSON.parse(localStorage.user);h.a.get(V+"api/users/"+e.id,{headers:{Authorization:"Token "+e.token}}).then((function(e){t.setState({tripIDs:e.data.trips})})).then((function(a){t.state.tripIDs.length<=0&&t.setState({local_loading:!1});for(var n=function(a){h.a.get(V+"api/trips/"+t.state.tripIDs[a],{headers:{Authorization:"Token "+e.token}}).then((function(e){t.setState({trips:[].concat(Object(G.a)(t.state.trips),[e.data])}),a===t.state.tripIDs.length-1&&t.setState({local_loading:!1})}))},r=0;r<t.state.tripIDs.length;r++)n(r)}))}catch(a){alert(a),t.props.history.push("/")}},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({local_loading:!0}),this.props.onTryAutoSignup(),null===localStorage.user||void 0===localStorage.user?this.props.history.push({pathname:"/login",state:{from:this.props.location.pathname}}):this.loadTrips()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement("div",{className:"jumbotron startBox"},i.a.createElement("h1",null," My Trips "),this.state.local_loading?i.a.createElement(D.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):this.state.trips.length>0?i.a.createElement("ul",null,this.state.trips.map((function(t,e){return i.a.createElement("li",{key:e}," ",t.tripName," ")}))):i.a.createElement("p",null," No trips available ")))}}]),a}(r.Component),z=Object(O.b)((function(t){return{isAuthenticated:null!==t.user,user:t.user}}),(function(t){return{onTryAutoSignup:function(){return t(b())}}}))(W),X=a(52);function Z(t){var e=t.getNorthEast().lat()/57.2958,a=t.getNorthEast().lng()/57.2958,n=t.getCenter().lat()/57.2958,r=t.getCenter().lng()/57.2958;return 1e3*(6378.8*Math.acos(Math.sin(n)*Math.sin(e)+Math.cos(n)*Math.cos(e)*Math.cos(a-r)))}var K=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={trip:null,center:0,startCenter:0,zoom:0,startZoom:0,startBounds:null,showInfoWindow:!1,currentInfoWindow:0},t.uponBoundsChanged=function(){var e=n.getBounds();console.log(e),null===t.state.test&&t.setState({test:e});var a={upper:{lat:e.Za.j,lng:e.Ua.j},lower:{lat:e.Za.i,lng:e.Ua.i},center:n.getCenter(),radius:Z(e)};t.props.mapBoundsChange(a),t.setState({zoom:n.getZoom()}),t.setState({center:n.getCenter()})},t.mapReset=function(){n.fitBounds(t.state.startBounds),t.uponBoundsChanged()},t.mapLoaded=function(){console.log("map loaded!"),null===t.state.startBounds&&t.setState({startBounds:n.getBounds()}),t.uponBoundsChanged()},t.WrappedMap=Object(X.withScriptjs)(Object(X.withGoogleMap)((function(e){return i.a.createElement(X.GoogleMap,{ref:function(t){return n=t},defaultZoom:t.state.startZoom,defaultCenter:t.state.startCenter,onZoomChanged:t.uponBoundsChanged,onDragEnd:t.uponBoundsChanged,onTilesLoaded:t.mapLoaded,zoom:t.state.zoom,center:t.state.center},e.children)}))),t.markerClickHandler=function(e,a){t.setState({showInfoWindow:!0}),t.setState({currentInfoWindow:a})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){void 0!==localStorage.trip&&this.setState({startCenter:JSON.parse(localStorage.trip),center:JSON.parse(localStorage.trip),startZoom:12,zoom:12})}},{key:"render",value:function(){var t=this;return i.a.createElement(r.Fragment,null,i.a.createElement("button",{onClick:this.mapReset}," Reset "),i.a.createElement(this.WrappedMap,{googleMapURL:this.props.googleMapURL,loadingElement:i.a.createElement("div",{style:{height:"100%"}}),containerElement:i.a.createElement("div",{style:{height:"85vh"}}),mapElement:i.a.createElement("div",{style:{height:"100%"}})},this.props.activitiesShown.currentList.map((function(e,a){return!e.added&&i.a.createElement(X.Marker,{key:a,position:e.geometry.location,label:(t.props.activitiesShown.firstActivityCounter+a+1).toString(),onClick:function(e){return t.markerClickHandler(e,a)}},t.state.showInfoWindow&&t.state.currentInfoWindow===a&&i.a.createElement(X.InfoWindow,{onCloseClick:function(){return t.setState({showInfoWindow:!1})}},i.a.createElement("span",null,e.name)))})),this.props.trip.activitiesAdded.map((function(e,a){return i.a.createElement(X.Marker,{key:a,position:e.geometry.location,label:(t.props.activitiesShown.firstActivityCounter+a+1).toString(),onClick:function(e){return t.markerClickHandler(e,a)},icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue.png",scaledSize:new window.google.maps.Size(44,44),labelOrigin:new window.google.maps.Point(22,15)}},t.state.showInfoWindow&&t.state.currentInfoWindow===a&&i.a.createElement(X.InfoWindow,{onCloseClick:function(){return t.setState({showInfoWindow:!1})}},i.a.createElement("span",null,e.name)))}))))}}]),a}(r.Component);K.defaultProps={googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB-tj53yeTQiKnUmi_Jr2a7caz5RJVY60Y&v=3.exp&libraries=geometry,drawing,places"};var q=Object(O.b)((function(t){return{trip:t.trip,map:t.map,activitiesShown:t.activitiesShown}}),(function(t){return{mapBoundsChange:function(e){return t(function(t){return{type:"MAP_BOUNDS_CHANGED",bounds:t}}(e))}}}))(K),Q=a(627),$=(a(620),a(621),function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t,e=this;return t=this.props.index<10?"activityTop":"activityBottom",i.a.createElement("div",null,!0===this.props.value.added?i.a.createElement("div",{id:"added",className:t,onClick:function(){e.props.activityClickHandlerToSubtract(e.props.index),console.log(e.props.index)}},this.props.displayIndex+1," : ",this.props.value.name):i.a.createElement("div",{id:"notAdded",className:t,onClick:function(){return e.props.activityClickHandlerToAdd(e.props.index)}},this.props.displayIndex+1," : ",this.props.value.name))}}]),a}(r.Component)),tt="AIzaSyDyb0_iNF_gpoxydk5Vd8IpWj1Hy1Tp5Vc",et=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={activities:[],localLoading:!1,items:20,isScrolling:null},t.activityClickHandlerToAdd=function(e){t.props.activitiesAdd(e)},t.activityClickHandlerToSubtract=function(e){t.props.activitiesSubtract(e)},t.loadNext=function(){if(t.refs.myscroll.scrollTop=0,t.props.isLastPage);else{if(t.props.activitiesShown.hasNextPageLoaded){var e={dataType:"GONEXT",pageNumber:t.props.activitiesShown.pageNumber};return void t.props.activitiesLoad(e)}var a={dataType:"NEXTKEYSEARCH",key:tt,next_page_token:t.props.activitiesShown.nextPageToken};t.props.activitiesLoad(a)}},t.loadPrev=function(){if(t.refs.myscroll.scrollTop=0,!t.props.isFirstPage){t.props.activitiesLoad({dataType:"GOPREV"})}},t.changeCategory=function(e){if("General"===e.target.value){var a={dataType:"TEXTSEARCH",key:tt,query:t.convertSpaceToPlus(JSON.parse(localStorage.trip).country+" points of interest"),category:e.target.value};t.props.activitiesLoad(a),console.log("Previous Category: "+t.props.activitiesShown.currentCategory)}else{var n={dataType:"TEXTSEARCH",key:tt,query:t.convertSpaceToPlus(JSON.parse(localStorage.trip).country+" "+e.target.value+" attractions"),category:e.target.value};console.log(n.query),t.props.activitiesLoad(n),console.log("Previous Category: "+t.props.activitiesShown.currentCategory)}},t.clearAll=function(){0!==t.props.trip.activitiesAdded.length&&t.props.clearAllActivities()},t}return Object(u.a)(a,[{key:"convertSpaceToPlus",value:function(t){for(var e=0;e<t.length;e++)t=t.replace(" ","+");return t}},{key:"componentDidMount",value:function(){if(void 0!==localStorage.trip){var t={dataType:"TEXTSEARCH",key:tt,query:this.convertSpaceToPlus(JSON.parse(localStorage.trip).country+" points of interest"),category:"General"};this.props.activitiesLoad(t)}}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{id:"activityList",ref:"myscroll"},this.props.activitiesLoading?i.a.createElement(D.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement(r.Fragment,null,i.a.createElement("div",null,i.a.createElement(Q.a,{className:"customButton",onClick:this.clearAll,value:"Reset",variant:"warning"},"Clear All")),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"General",variant:"General"===this.props.activitiesShown.currentCategory?"secondary":"info"},"General"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Food",variant:"Food"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Food"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Outdoors",variant:"Outdoors"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Outdoors"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Art & Culture",variant:"Art & Culture"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Art & Culture"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Beaches",variant:"Beaches"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Beaches"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Museums",variant:"Museums"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Museums"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Amusement Parks",variant:"Amusement Parks"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Amusement Parks"),i.a.createElement(Q.a,{className:"customButton",onClick:this.changeCategory,value:"Local Favorites",variant:"Local Favorites"===this.props.activitiesShown.currentCategory?"secondary":"info"},"Local Favorites"),!this.props.isFirstPage&&i.a.createElement(Q.a,{id:"prevPageButton",variant:"primary",className:"customButton",onClick:this.loadPrev}," Scroll to Prev Page "),this.props.activitiesShown.currentList.map((function(e,a){return i.a.createElement($,{key:a,value:e,displayIndex:a+t.props.activitiesShown.firstActivityCounter,activityClickHandlerToAdd:t.activityClickHandlerToAdd,activityClickHandlerToSubtract:t.activityClickHandlerToSubtract,index:a})})),this.props.isLastPage?i.a.createElement("div",null," No more! Try changing category or moving the map "):i.a.createElement(Q.a,{variant:"primary",className:"customButton",id:"nextPageButton",onClick:this.loadNext}," Scroll to Next Page ")))}}]),a}(r.Component),at=Object(O.b)((function(t){return{trip:t.trip,map:t.map,activitiesShown:t.activitiesShown,activitiesLoading:t.activitiesLoading,isLastPage:!t.activitiesShown.hasNextPageLoaded&&-1===t.activitiesShown.nextPageToken,isFirstPage:0===t.activitiesShown.pageNumber}}),(function(t){return{activitiesLoad:function(e){return t(function(t){return function(e){e({type:"ACTIVITIES_START"}),e(C(t))}}(e))},activitiesAdd:function(e){return t(function(t){return{type:"ACTIVITY_ADD",index:t}}(e))},activitiesSubtract:function(e){return t(function(t){return{type:"ACTIVITY_SUBTRACT",index:t}}(e))},clearAllActivities:function(){return t({type:"ACTIVITY_CLEARALL"})}}}))(et),nt=(a(622),function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={},t.getItinerary=function(){var e={lengthOfTrip:5,activitiesAdded:t.props.trip.activitiesAdded};t.props.itineraryLoad(e)},t.closeModal=function(){t.setState({open:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(r.Fragment,null,i.a.createElement(w.b,{to:"/results",className:"itiButton",onClick:this.getItinerary,value:"general"},"Get Itinerary"),i.a.createElement("div",{id:"selectedActivityList"},this.props.trip.activitiesAdded.map((function(t,e){return i.a.createElement("p",{key:e},t.name)}))))}}]),a}(r.Component)),rt=Object(O.b)((function(t){return{trip:t.trip}}),(function(t){return{itineraryLoad:function(e){return t(function(t){return function(e){e({type:"ITINERARY_START"}),e(N(t))}}(e))}}}))(nt),it=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("trip")&&void 0!==localStorage.getItem("trip")?(this.props.onTryAutoSignup(),this.props.checkTrip()):this.props.history.push("/")}},{key:"componentDidUpdate",value:function(t,e,a){}},{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid align-items-center"},i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement("div",{className:"startBox"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-3",id:"selectedActivitiesBox"},i.a.createElement("h2",null," Welcome to ",this.props.trip.country," "),i.a.createElement(rt,null)),i.a.createElement("div",{className:"col-3",id:"activitiesBox"},i.a.createElement("h2",null," Activities: "),i.a.createElement(at,null)),i.a.createElement("div",{className:"col-6"},i.a.createElement(q,null)))))}}]),a}(r.Component),ot=Object(O.b)((function(t){return{isAuthenticated:null!==t.user,trip:t.trip,loading:t.loading,error:t.error}}),(function(t){return{onTryAutoSignup:function(){return t(b())},checkTrip:function(){return t(A())}}}))(it),st=(a(623),a(624),function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={fromIndex:-1,fromDayIndex:-1},t.onDragStart=function(e){t.setState({fromIndex:e.target.dataset.index}),t.setState({fromDayIndex:e.target.dataset.dayindex})},t.onDragOver=function(e){e.preventDefault();var a=e.target.dataset.index,n=e.target.dataset.dayindex,r=t.state.fromIndex,i=t.state.fromDayIndex;a===r&&n===i||void 0!==a&&void 0!==n&&(t.props.itineraryUpdate([n,a],[i,r]),t.setState({fromIndex:a}),t.setState({fromDayIndex:n}))},t.onDrop=function(t){t.preventDefault()},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this;return this.props.trip.itinerary?i.a.createElement("div",{id:"timetable",onDragOver:function(e){return t.onDragOver(e)},onDrop:this.onDrop},this.props.trip.itinerary.map((function(e,a){return i.a.createElement("div",{className:"day"},e.map((function(e,n){return 0!==n?i.a.createElement("div",{key:n,"data-index":n,"data-dayindex":a,draggable:!0,className:"timetableActivity",onDragStart:t.onDragStart,style:{backgroundColor:e.bgcolor}},i.a.createElement("p",null," ",JSON.parse(e).name," ")):null})))}))):i.a.createElement("h1",null," loading ")}}]),a}(r.Component)),ct=Object(O.b)((function(t){return{trip:t.trip}}),(function(t){return{itineraryUpdate:function(e,a){return t(function(t,e){return{type:"ITINERARY_UPDATE",toIndex:t,fromIndex:e}}(e,a))}}}))(st),lt=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.checkTrip(),this.props.onTryAutoSignup()}},{key:"render",value:function(){return i.a.createElement(r.Fragment,null,i.a.createElement(I,{from:this.props.location.pathname}),i.a.createElement("div",null,i.a.createElement(ct,null)))}}]),a}(r.Component),ut=Object(O.b)((function(t){return{trip:t.trip}}),(function(t){return{onTryAutoSignup:function(){return t(b())},checkTrip:function(){return t(A())}}}))(lt),pt=function(){return i.a.createElement(c.c,null,i.a.createElement(c.a,{exact:!0,path:"/",component:H}),i.a.createElement(c.a,{exact:!0,path:"/login/",component:F}),i.a.createElement(c.a,{exact:!0,path:"/signup/",component:J}),i.a.createElement(c.a,{exact:!0,path:"/mytrips",component:z}),i.a.createElement(c.a,{exact:!0,path:"/shopping",component:ot}),i.a.createElement(c.a,{exact:!0,path:"/results",component:ut}))},dt={error:null,loading:!1,activitiesLoading:!1,getItineraryLoading:!1,user:null,trip:{country:-1,lat:-1,lng:-1,startDate:-1,endDate:-1,activitiesAdded:[],activitiesAddedIds:[],itinerary:[[]]},map:{bounds:{upper:{lat:-1,lng:-1},lower:{lat:-1,lng:-1},center:-1,radius:-1}},activitiesShown:{currentList:[],fullList:[],currentCategory:"",firstActivityCounter:-1,pageNumber:-1,nextPageToken:-1,hasNextPageLoaded:!1,pageLoadedUpTo:-1}},mt=function(t,e){return g(t,{error:null,loading:!0})},ht=function(t,e){var a={id:e.userId,token:e.token,username:e.username};return g(t,{user:a,error:null,loading:!1})},vt=function(t,e){return g(t,{error:e.error,loading:!1})},gt=function(t,e){return g(t,{user:null})},ft=function(t,e){return g(t,{trip:e.trip,loading:!1})},yt=function(t,e){var a=g(t.map,{bounds:e.bounds});return g(t,{map:a})},St=function(t,e){if("NEXTKEYSEARCH"===e.dataType){var a=[].concat(Object(G.a)(t.activitiesShown.fullList),[e.activitiesShown]),n={currentList:e.activitiesShown,fullList:a,currentCategory:e.category,pageLoadedUpTo:t.activitiesShown.pageNumber+1,pageNumber:t.activitiesShown.pageNumber+1,firstActivityCounter:t.activitiesShown.firstActivityCounter+20,nextPageToken:e.nextPageToken};return g(t,{activitiesShown:n,activitiesLoading:!1})}if("GOPREV"===e.dataType){var r=Object(G.a)(t.activitiesShown.fullList[t.activitiesShown.pageNumber-1]),i=g(t.activitiesShown,{currentList:r,currentCategory:e.category,pageNumber:t.activitiesShown.pageNumber-1,firstActivityCounter:t.activitiesShown.firstActivityCounter-20,hasNextPageLoaded:!0});return g(t,{activitiesShown:i,activitiesLoading:!1})}if("GONEXT"===e.dataType){var o,s=Object(G.a)(t.activitiesShown.fullList[t.activitiesShown.pageNumber+1]);o=!(t.activitiesShown.pageNumber+1>=t.activitiesShown.pageLoadedUpTo);var c=g(t.activitiesShown,{currentList:s,currentCategory:e.category,pageNumber:t.activitiesShown.pageNumber+1,firstActivityCounter:t.activitiesShown.firstActivityCounter+20,hasNextPageLoaded:o});return g(t,{activitiesShown:c,activitiesLoading:!1})}var l={currentList:e.activitiesShown,fullList:[e.activitiesShown],currentCategory:e.category,pageNumber:0,firstActivityCounter:0,nextPageToken:e.nextPageToken};return g(t,{activitiesShown:l,activitiesLoading:!1})},Et=function(t,e){return g(t,{activitiesLoading:!0})},bt=function(t,e){var a=JSON.parse(localStorage.trip),n=t.activitiesShown.currentList[e.index];n=g(n,{added:!0});var r=Object(G.a)(t.activitiesShown.currentList);r[e.index]=n;var i=Object(G.a)(t.activitiesShown.fullList);i[t.activitiesShown.pageNumber][e.index]=n;var o=g(t.activitiesShown,{currentList:r,fullList:i});return a.activitiesAdded.push(n),a.activitiesAddedIds.push(n.id),localStorage.setItem("trip",JSON.stringify(a)),g(t,{trip:a,activitiesShown:o})},Tt=function(t,e){var a=JSON.parse(localStorage.trip),n=t.activitiesShown.currentList[e.index];n=g(n,{added:!1});var r=Object(G.a)(t.activitiesShown.currentList);r[e.index]=n;var i=Object(G.a)(t.activitiesShown.fullList);i[t.activitiesShown.pageNumber][e.index]=n;var o=g(t.activitiesShown,{currentList:r,fullList:i}),s=a.activitiesAdded.filter((function(t){return t.name!==n.name}));a.activitiesAdded=s;var c=a.activitiesAddedIds.filter((function(t){return t!==n.id}));return a.activitiesAddedIds=c,localStorage.setItem("trip",JSON.stringify(a)),g(t,{trip:a,activitiesShown:o})},At=function(t,e){return t.trip.activitiesAdded.map((function(t){return g(t,{added:!1})})),t.trip.activitiesAdded=[],t.trip.activitiesAddedIds=[],localStorage.clear(),t.activitiesShown.currentList.map((function(t){return g(t,{added:!1})})),g(t,{trip:t.trip,activitiesShown:t.activitiesShown})},Ct=function(t,e){var a=g(t.trip,{itinerary:e.itinerary});return g(t,{trip:a,getItineraryLoading:!1})},Nt=function(t,e){return g(t,{getItineraryLoading:!0})},Ot=function(t,e){var a=Object(G.a)(t.trip.itinerary),n=a[e.fromIndex[0]],r=a[e.toIndex[0]],i=n[e.fromIndex[1]];n.splice(e.fromIndex[1],1),r.splice(e.toIndex[1],0,i),a[e.fromIndex[0]]=n,a[e.toIndex[0]]=r;var o=g(t.trip,{itinerary:a});return g(t,{trip:o})},wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ACTIVITY_SUBTRACT":return Tt(t,e);case"ACTIVITY_ADD":return bt(t,e);case"ACTIVITIES_START":return Et(t);case"ACTIVITIES_LOAD":return St(t,e);case"ACTIVITY_CLEARALL":return At(t);case"MAP_BOUNDS_CHANGED":return yt(t,e);case"NEW_TRIP":return ft(t,e);case"AUTH_START":return mt(t);case"AUTH_SUCCESS":return ht(t,e);case"AUTH_FAIL":return vt(t,e);case"AUTH_LOGOUT":return gt(t);case"ITINERARY_LOAD":return Ct(t,e);case"ITINERARY_START":return Nt(t);case"ITINERARY_UPDATE":return Ot(t,e);default:return t}},kt=a(76),It=a(287),Lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||kt.c,jt=Object(kt.d)(wt,Lt(Object(kt.a)(It.a))),Dt=i.a.createElement(O.a,{store:jt},i.a.createElement(w.a,null,i.a.createElement(pt,null)));s.a.render(Dt,document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.e0c685d4.chunk.js.map