{"version":3,"sources":["Components/Map.jsx","store/utility.js","store/actions/actions.js","store/actions/actionTypes.js","Components/navBar.jsx","Components/Calendar.jsx","Components/Autocomplete.jsx","Components/InputForm.jsx","Containers/StartPage.jsx","Containers/Login.jsx","Containers/Signup.jsx","Containers/MyTrips.jsx","Components/Activity.jsx","Components/ActivityList.jsx","Components/SelectedActivityList.jsx","Containers/Shopping.jsx","Components/Timetable.jsx","Containers/Results.jsx","routes.js","store/reducers/reducer.js","index.js"],"names":["ref","updateObject","oldObject","updatedProperties","DATABASE_URL","authSuccess","token","username","userId","type","authFail","error","authLogin","password","dispatch","axios","post","then","res","data","id","user","localStorage","setItem","JSON","stringify","catch","err","authCheckState","parse","getItem","undefined","removeItem","newTrip","tripCountry","tripLat","tripLng","startDate","endDate","destination","tripName","headers","Authorization","console","log","trip","newTripData","checkTrip","activitiesLoadData","url","dataType","category","get","nextPageToken","results","i","length","includes","newPlace","added","activitiesShown","alert","itineraryLoadData","iti","itinerary","getItineraryLoading","NavBar","className","to","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","this","props","isAuthenticated","Fragment","onClick","logout","pathname","state","from","Component","connect","clear","Calendar","focusedInput","startDateId","endDateId","onDatesChange","setState","updateDates","format","onFocusChange","Autocomplete","handleChange","address","updateCountry","handleSelect","geocodeByAddress","getLatLng","latLng","searchOptions","types","value","onChange","onSelect","highlightFirstSuggestion","getInputProps","suggestions","getSuggestionItemProps","loading","placeholder","map","suggestion","active","style","backgroundColor","cursor","description","InputForm","newTripCreated","goToShoppingPage","countryName","event","preventDefault","prevProps","prevState","snapshot","history","push","onSubmit","name","Spinner","animation","role","actions","StartPage","window","google","onTryAutoSignup","location","Login","handleSubmit","onAuth","target","Signup","email","password1","password2","MyTrips","tripIDs","trips","local_loading","loadTrips","index","key","getBoundsRadius","bounds","ne_lat","getNorthEast","lat","ne_lng","lng","c_lat","getCenter","c_lng","Math","acos","sin","cos","Map","center","startCenter","zoom","startZoom","startBounds","showInfoWindow","currentInfoWindow","uponBoundsChanged","newBounds","getBounds","test","mapBoundsChange","getZoom","mapReset","fitBounds","mapLoaded","WrappedMap","withScriptjs","withGoogleMap","mapRef","defaultZoom","defaultCenter","onZoomChanged","onDragEnd","onTilesLoaded","children","markerClickHandler","googleMapURL","loadingElement","height","containerElement","mapElement","currentList","position","geometry","label","firstActivityCounter","toString","onCloseClick","activitiesAdded","icon","scaledSize","maps","Size","labelOrigin","Point","defaultProps","Activity","activityClass","activityClickHandlerToSubtract","displayIndex","activityClickHandlerToAdd","API_KEY","ActivityList","activities","localLoading","items","isScrolling","activitiesAdd","activitiesSubtract","loadNext","refs","myscroll","scrollTop","isLastPage","hasNextPageLoaded","pageNumber","activitiesLoad","next_page_token","loadPrev","isFirstPage","changeCategory","query","convertSpaceToPlus","currentCategory","clearAll","clearAllActivities","text","replace","activitiesLoading","Button","variant","SelectedActivityList","getItinerary","lengthOfTrip","itineraryLoad","closeModal","open","Shopping","Timetable","fromIndex","fromDayIndex","onDragStart","dataset","dayindex","onDragOver","toIndex","toDayIndex","itineraryUpdate","onDrop","data-index","data-dayindex","draggable","bgcolor","Results","BaseRoute","exact","path","component","initialState","authStart","action","authLogout","updateBounds","newMap","newFullList","fullList","pageLoadedUpTo","newCurrentList","activitiesStart","currentTrip","activityAdded","activitiesShownCurrentList","activitiesShownFullList","activitySelected","filteredTrip","filter","activity","filteredTripIds","activitiesAddedIds","itineraryStart","currentIti","fromDay","toDay","fromActivity","splice","reducer","composeEnhances","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e0c685d4.chunk.js","sourcesContent":["// Basic Imports\nimport React, { Component, Fragment } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\nimport {\n    withScriptjs,\n    withGoogleMap,\n    GoogleMap,\n    Marker,\n    InfoWindow\n} from \"react-google-maps\";\n\nlet ref\n\n\n// Given bounds, gets radius.\nfunction getBoundsRadius(bounds){\n    // r = radius of the earth in km\n    var r = 6378.8\n    // degrees to radians (divide by 57.2958)\n    var ne_lat = bounds.getNorthEast().lat() / 57.2958\n    var ne_lng = bounds.getNorthEast().lng() / 57.2958\n    var c_lat = bounds.getCenter().lat() / 57.2958\n    var c_lng = bounds.getCenter().lng() / 57.2958\n    // distance = circle radius from center to Northeast corner of bounds\n    var r_km = r * Math.acos(\n    Math.sin(c_lat) * Math.sin(ne_lat) + \n    Math.cos(c_lat) * Math.cos(ne_lat) * Math.cos(ne_lng - c_lng)\n    )\n    return r_km *1000 // radius in meters\n}\n\n/**\n * Component, renders Google Map.\n * @memberof Component\n * @param {ReduxAction} mapBoundsChange: to update redux state object (Map) when changing Google Map bounds with new bounds\n * @param {ReduxState} trip: Contains information about current trip (e.g. trip name/date, and list of current activities added)\n * @param {ReduxState} map: Contains map information (e.g. lng/lat of center, and bounds)\n * @param {ReduxAction} activitiesShown: Contains information about the list of activities currently rendered\n * @returns Rendered Google Map with Markers of activities shown, and activities added.\n */\nclass Map extends Component{\n\n    state = {\n        trip: null,\n\n        center: 0,\n        startCenter: 0,\n        zoom: 0,\n        startZoom: 0,\n\n        startBounds: null,\n\n        showInfoWindow: false,\n        currentInfoWindow: 0,\n    }\n    componentDidMount() {\n\n        if (localStorage.trip !== undefined) {\n            this.setState({\n                startCenter: JSON.parse(localStorage.trip),\n                center: JSON.parse(localStorage.trip),\n                startZoom: 12,\n                zoom: 12\n            })            \n        }\n    }\n\n    static defaultProps = {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyB-tj53yeTQiKnUmi_Jr2a7caz5RJVY60Y&v=3.exp&libraries=geometry,drawing,places\",\n    }\n\n    /**\n     * Called upon moving the map.\n     * Updates the new bounds of the map to redux-state map.\n     * @param {mapBoundsChange} Redux-action: to update redux state object (Map) when changing Google Map bounds with new bounds\n     */\n    uponBoundsChanged = () => {\n        const newBounds = ref.getBounds()\n        console.log(newBounds)\n        if (this.state.test === null) {\n            this.setState({test: newBounds})\n        }\n        const bounds = {\n            \"upper\": {\n                \"lat\": newBounds[\"Za\"][\"j\"],\n                \"lng\": newBounds[\"Ua\"][\"j\"],\n            },\n\n            \"lower\": {\n                \"lat\": newBounds[\"Za\"][\"i\"],\n                \"lng\": newBounds[\"Ua\"][\"i\"],\n            },\n\n            \"center\": ref.getCenter(),\n\n            \"radius\": getBoundsRadius(newBounds),\n        }\n\n        //Updates new bounds to Redux\n        this.props.mapBoundsChange(bounds);\n\n        //Updates zoom and center to local state.\n        this.setState({zoom: ref.getZoom()});\n        this.setState({center: ref.getCenter()});\n\n    }\n\n    /**\n     * Called upon clicking button to reset map view to starting stage.\n     * Zooms out the map to default stage. \n     */\n    mapReset = () => {\n        //When fitbounds is called, zoom will be set to StartZoom - 1\n        ref.fitBounds(this.state.startBounds);\n        this.uponBoundsChanged();\n\n    }\n\n    /**\n     * Called upon first load of map.\n     * Updates local state of bounds, and subsequently the redux-state by calling uponBoundsChanged\n     */\n    mapLoaded = () => {\n        console.log(\"map loaded!\")\n        if (this.state.startBounds === null) {\n            this.setState({startBounds: ref.getBounds()})\n        }\n        this.uponBoundsChanged();\n    }\n    //First load, thus need to use local storage.\n    WrappedMap = withScriptjs(withGoogleMap(props =>\n        <GoogleMap\n          // Binds GoogleMap to ref, such that in getting info from maps will be easier\n          ref={(mapRef) => ref = mapRef}\n          \n          defaultZoom={this.state.startZoom}\n          defaultCenter={this.state.startCenter}\n          \n          // Custom add-ons to props\n          onZoomChanged = {this.uponBoundsChanged}\n          onDragEnd = {this.uponBoundsChanged}\n          onTilesLoaded={this.mapLoaded}\n\n          zoom = {this.state.zoom}\n          center = {this.state.center}\n        >\n            {props.children}\n        </GoogleMap>\n      ));\n\n    markerClickHandler = (event, index) => {\n        this.setState({showInfoWindow: true})\n        this.setState({currentInfoWindow: index})\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <button onClick={this.mapReset}> Reset </button>\n\n                <this.WrappedMap\n                    googleMapURL={this.props.googleMapURL}\n                    loadingElement={<div style={{ height: `100%` }} />}\n                    containerElement={<div style={{ height: `85vh` }} />}\n                    mapElement={<div style={{ height: `100%` }} />}\n                >\n                 \n                    { \n                        this.props.activitiesShown.currentList.map((value,index) => \n                            (!value.added) && <Marker key={index} position={value.geometry.location} label={(this.props.activitiesShown.firstActivityCounter + index + 1).toString()}\n                                    onClick={(event) => this.markerClickHandler(event, index)}>\n\n                                    {this.state.showInfoWindow && (this.state.currentInfoWindow === index) && \n                                        (<InfoWindow onCloseClick= {() => this.setState({showInfoWindow: false})}> \n                                            <span>{value.name}</span> \n                                        </InfoWindow> )\n                                    }\n\n                                </Marker> )\n\n                    }\n\n                    {\n                        this.props.trip.activitiesAdded.map((value,index) => \n                            <Marker key={index} \n                                position={value.geometry.location} \n                                label={(this.props.activitiesShown.firstActivityCounter + index + 1).toString()}\n                                onClick={(event) => this.markerClickHandler(event, index)} \n                                icon = {{url:\"http://maps.google.com/mapfiles/ms/icons/blue.png\",\n                                        scaledSize: new window.google.maps.Size(44, 44), \n                                        labelOrigin: new window.google.maps.Point(22, 15), }}>\n                                \n                                {this.state.showInfoWindow && (this.state.currentInfoWindow === index) && \n                                    (<InfoWindow onCloseClick= {() => this.setState({showInfoWindow: false})}> \n                                        <span>{value.name}</span> \n                                    </InfoWindow> )\n                                }\n\n                            </Marker> )\n\n                    }\n\n                </this.WrappedMap>\n            </Fragment>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        trip: state.trip,\n        map: state.map,\n        activitiesShown: state.activitiesShown\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        mapBoundsChange: (bounds) => dispatch(actions.mapBoundsChange(bounds)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);","export const updateObject = (oldObject, updatedProperties) => {\n\treturn {\n\t\t...oldObject,\n\t\t...updatedProperties\n\t}\n}\n//Takes in oldObject, replaces the properties\n","import * as actionTypes from './actionTypes';\nimport axios from 'axios';\nimport {updateObject} from '../utility';\nconst DATABASE_URL = \"https://trippyy-backend.herokuapp.com/\"\n\n/**\n *\n * Sends an action to reducer to change loading to true.\n * @memberof ReduxAction\n */\nexport const authStart = () => {\n\treturn {\n\t\ttype: actionTypes.AUTH_START\n\t}\n}\n\n/** \n* Sends an action to reducer to update REDUX token, username, userId upon login.\n* @memberof ReduxAction\n* @param {String} token: token of user account\n* @param {String} username: username\n* @param {String} userid: serial number of user\n*/\nexport const authSuccess = (token, username, userId) => {\n\treturn {\n\t\ttoken: token,\n\t\ttype: actionTypes.AUTH_SUCCESS,\n\t\tusername: username,\n\t\tuserId: userId\n\t}\n}\n\n/** \n* Sends an action to alert an error.\n* @memberof ReduxAction\n* @param {Object} error: error\n*/\nexport const authFail = (error) => {\n\treturn {\n\t\terror: error,\n\t\ttype: actionTypes.AUTH_FAIL\n\t}\n}\n\n/** \n* Called upon logout, removes everything in LOCALSTORAGE \n* @memberof ReduxAction\n*/\nexport const logout = () => {\n\tlocalStorage.clear();\n\treturn {\n\t\ttype: actionTypes.AUTH_LOGOUT\n\t}\n}\n\n/** \n* Called during checking of authentication state, updates REDUX token, remove all USER attributes in LOCALSTORAGE\n* @memberof ReduxAction\n*/\nexport const notLoggedIn = () => {\n\tlocalStorage.removeItem('user');\n\treturn {\n\t\ttype: actionTypes.AUTH_LOGOUT\n\t}\n}\n\n/** \n* Called upon login, logins by checking with backend, updates USER attributes in LOCALSTORAGE, \n* and calls authSuccess or authFailed, depending on outcome.\n* @memberof ReduxAction\n* @param {String} username: username of user\n* @param {String} password: password of user\n*/\nexport const authLogin = (username, password) => {\n\treturn dispatch => {\n\t\tdispatch(authStart());\n\t\taxios.post(DATABASE_URL + 'api/authenticate/', {\n\t\t\tusername: username,\n\t\t\tpassword: password\n\t\t}).then(res => {\n\t\t\tconst token = res.data.token;\n\t\t\tconst userId = res.data.id;\n\t\t\tconst user = {\n\t\t\t\t'id': userId,\n\t\t\t\t'token': token,\n\t\t\t\t'username': username\n\t\t\t}\n\t\t\tlocalStorage.setItem('user', JSON.stringify(user));\n\t\t\tdispatch(authSuccess(token, username, userId));\n\t\t})\n\t\t.catch(err => {\n\t\t\tdispatch(authFail(err))\n\t\t})\n\t}\n}\n\n/** \n* Signs up by sending POST req to backend, then calls authLogin.\n* @memberof ReduxAction\n* @param {String} username: username of user\n* @param {String} email: email of user\n* @param {String} password1: password1 of user\n* @param {String} password2: password2 of user\n*/\nexport const authSignup = (username, email, password1, password2) => {\n\treturn dispatch => {\n\t\tdispatch(authStart());\n\t\taxios.post(DATABASE_URL + 'rest-auth/registration/', {\n\t\t\tusername: username,\n\t\t\temail: email,\n\t\t\tpassword1: password1,\n\t\t\tpassword2: password2\n\t\t}).then(res => {\n\t\t\tdispatch(authLogin(username, password1));\n\t\t})\n\t\t.catch(err => {\n\t\t\tdispatch(authFail(err))\n\t\t})\n\t}\n}\n\n/** \n* Checks with LOCALSTORAGE (token) if user is logged in, and updates REDUX token accordingly.\n* @memberof ReduxAction\n*/\nexport const authCheckState = () => {\n\treturn dispatch => {\n\t\tconst user = JSON.parse(localStorage.getItem('user'));\n\t\tif (user === undefined || user === null) {\n\t\t\tdispatch(notLoggedIn());\n\t\t} else {\n\t\t\tconst token = user['token'];\n\t\t\tconst username = user['username'];\n\t\t\tdispatch(authSuccess(token, username));\n\t\t}\n\t}\t\n}\n\n\n// TRIP ----------------------------------------------------------------------\n\n/** \n* Stores trip variables into local storage, POSTS data if logined, and updates redux state for trip.\n* @memberof ReduxAction\n* @param {String} tripCountry: country of trip\n* @param {number} tripLat: lattitude of country of trip\n* @param {number} tripLng: longitude of country of trip\n* @param {String} startDate: start date of trip\n* @param {String} endDate: end date of trip\n*/\nexport const newTripData = (tripCountry, tripLat, tripLng, startDate, endDate) => {\n\tconst data = {\n\t\t\t\tdestination: tripCountry,\n\t\t\t\ttripName: \"Trip to \" + tripCountry + \" from \" + startDate + \" to \" + endDate,\n\t\t\t\tstartDate: startDate,\n\t\t\t\tendDate: endDate\n\t\t\t}\n\taxios.post(DATABASE_URL + 'api/trips/', data, {\n\t\t\theaders: {Authorization: \"Token \" + localStorage.token},\n\t\t}).then(res => console.log(res));\n\n\tconst trip = {\n\t\t'country' : tripCountry,\n\t\t'lat' : tripLat,\n\t\t'lng' : tripLng,\n\t\t'startDate' : startDate,\n\t\t'endDate' : endDate,\n\t\t'activitiesAdded': [],\n\t\t'activitiesAddedIds': [],\n\t\t'itinerary' : [[]],\n\t}\n\tlocalStorage.setItem('trip', JSON.stringify(trip));\n\treturn {\n\t\ttype: actionTypes.NEW_TRIP,\n\t\ttrip: trip\n\t}\n\n}\n\n/** \n* Calls authStart to change REDUX loading to true, then proceeds on to call newTripData.\n* @memberof ReduxAction\n* @param {String} tripCountry: country of trip\n* @param {number} tripLat: lattitude of country of trip\n* @param {number} tripLng: longitude of country of trip\n* @param {String} startDate: start date of trip\n* @param {String} endDate: end date of trip\n*/\nexport const newTrip = (tripCountry, tripLat, tripLng, startDate, endDate) => {\n\treturn dispatch => {\n\t\tdispatch(authStart());\n\t\tdispatch(newTripData(tripCountry, tripLat, tripLng, startDate, endDate));\n\t}\n}\n\n/**\n* Gets trip details from local storage, and update it to redux state.\n* @memberof ReduxAction\n*/\nexport const checkTrip = () => {\n\tif (localStorage.trip !== null && localStorage.trip !== undefined) {\n\t\treturn {\n\t\t\ttype: actionTypes.NEW_TRIP,\n\t\t\ttrip: JSON.parse(localStorage.trip)\n\t\t}\n\t} else {\n\t\treturn {\n\t\t\ttype: actionTypes.AUTH_FAIL,\n\t\t\terror: \"No trip found\"\n\t\t}\n\t}\n}\n\n\n// MAP / ACTIVITIES --------------------------------------------------------------------------\n\n/**\n* Sends an action to reducer to update map information with new bounds of map\n* @memberof ReduxAction\n* @param {Object} bounds: new bounds of map\n*/\nexport const mapBoundsChange = (bounds) => {\n\treturn {\n\t\ttype: actionTypes.MAP_BOUNDS_CHANGED,\n\t\tbounds: bounds\n\t}\n}\n\n/**\n * Sends an action to reducer to change activities loading to true.\n * @memberof ReduxAction\n */\nexport const activitiesStart = () => {\n\treturn {\n\t\ttype: actionTypes.ACTIVITIES_START\n\t}\n}\n\n/**\n * Calls activitiesStart to change REDUX activities loading to true, then proceeds on to call activitiesLoadData\n * @memberof ReduxAction\n * @param {Object} data: contains parameters to call for Google API to load data\n */\nexport const activitiesLoad = (data) => {\n\treturn (dispatch) => {\n\t\tdispatch(activitiesStart());\n\t\tdispatch(activitiesLoadData(data));\n\t}\n}\n\n/**\n * Loads data to update activities in their corresponding category shown in redux state according to data type entered,\n * and update it to redux state.\n * @memberof ReduxAction\n * @param {Object} data: contains parameters to call for Google API to load data\n */\nexport const activitiesLoadData = (data) => {\n\treturn (dispatch) => {\n\t// * Change URL depending on dataType.\n\t\n\tvar url;\n\tif (data.dataType === \"TEXTSEARCH\") {\n\t\turl = \"http://trippyy-backend.herokuapp.com/api/TextSearch/\"\n\t} else if (data.dataType === \"NEXTKEYSEARCH\") {\n\t\turl = \"http://trippyy-backend.herokuapp.com/api/NextKeySearch/\"\n\t} else if (data.dataType === \"BOUNDEDTEXTSEARCH\") {\n\t\turl = \"http:/trippyy-backend.herokuapp.com/api/BoundedTextSearch/\"\n\n\t\t// If input type was to go to previous page, simply change activities shown\n\t\t// inside reducer.\n\t} else if (data.dataType === \"GOPREV\") {\n\t\tdispatch({\n\t\t\ttype: actionTypes.ACTIVITIES_LOAD,\n\t\t\tdataType: data.dataType,\n\t\t\tcategory: data.category,\n\t\t})\n\t\treturn;\n\t\t// If input type was to go to next page, simply change activities shown\n\t\t// inside reducer.\n\t} else if (data.dataType === \"GONEXT\") {\n\t\taxios.get(\"www.wikipedia.com\").then((res) => {console.log(\"e\")});\n\t\tdispatch({\n\t\t\ttype: actionTypes.ACTIVITIES_LOAD,\n\t\t\tdataType: data.dataType,\n\t\t\tcategory: data.category,\n\t\t})\n\t\treturn;\n\t}\n\t\n\taxios.post(url, data)\n          .then( (res) => {\n          \t// * Upon loading data, check if the activities ID are already added into trip, by comparing with local\n          \t// * if added already, add a {added: true} to the activity\n          \tres = (JSON.parse(res.data));\n          \tconsole.log(res);\n          \t// Check for next page token, if it exists, store it.\n          \tvar nextPageToken;\n          \tif (res[\"next_page_token\"]) {\n          \t\tnextPageToken = res[\"next_page_token\"];\n          \t} else {\n          \t\tnextPageToken = -1;\n          \t}\n\n          \t \n          \t// * Storing results, and checking if place is alr added\n          \t\n          \tvar results = res[\"results\"]\n          \tfor (var i = 0; i < results.length; i++) {\n          \t\tif (JSON.parse(localStorage.trip)[\"activitiesAddedIds\"].includes(results[i].id)) {\n          \t\t\tconst newPlace = updateObject(results[i], {added: true})\n          \t\t\tresults[i] = newPlace\n          \t\t}\n          \t}\n\n          \t\n          \t// * Dispatch results IF LOADING NEW PAGE DATA\n          \t\n            dispatch({\n            \ttype: actionTypes.ACTIVITIES_LOAD,\n\t\t\t\tdataType: data.dataType,\n\t\t\t\tcategory: data.category,\n            \tactivitiesShown: results,\n            \tnextPageToken: nextPageToken,\n            })\n        }).catch( (error) => {\n            alert(error);\n            dispatch({\n            \ttype: actionTypes.ACTIVITIES_LOAD,\n\t\t\t\tdataType: data.dataType,\n\t\t\t\tcategory: data.category,\n            \tactivitiesShown: [],\n            })\n        });\n\n    }\n}\n\n/**\n* Adds activity, update redux state to change status of activity to {added: true} \n* @memberof ReduxAction\n* @param {number} index: index of activity added.\n*/\nexport const activitiesAdd = (index) => {\n\treturn {\n\t\ttype: actionTypes.ACTIVITY_ADD,\n\t\tindex: index\n\t}\n}\n\nexport const activitiesSubtract = (index) => {\n\treturn {\n\t\ttype: actionTypes.ACTIVITY_SUBTRACT,\n\t\tindex: index\n\t}\n}\n\nexport const clearAllActivities = () => {\n\treturn {\n\t\ttype: actionTypes.ACTIVITY_CLEARALL,\n\t}\n}\n \n// GET ITINERARY --------------------------------------------------------------------------\n\n/**\n * Sends an action to reducer to change itinerary loading to true, and update it to redux state.\n * @memberof ReduxAction\n */\nexport const itineraryLoadStart = () => {\n\treturn {\n\t\ttype: actionTypes.ITINERARY_START,\n\t}\n}\n\n/**\n * Calls itineraryLoadStart to change REDUX itinerary loading to true, then proceeds on to call itineraryLoadData.\n * @memberof ReduxAction\n * @param {Object} data: contains a list of activities selected to generate itinerary\n */\nexport const itineraryLoad = (data) => {\n\treturn (dispatch) => {\n\t\tdispatch(itineraryLoadStart());\n\t\tdispatch(itineraryLoadData(data));\n\t}\n}\n\n/**\n * Calls backend request to generate itinerary and update it to redux state.\n * @memberof ReduxAction\n * @param {Object} data: contains a list of activities selected to generate itinerary\n */\nexport const itineraryLoadData = (data) => {\n\treturn (dispatch) => {\n\t    axios.post(\"https:/trippyy-backend.herokuapp.com/api/algo/\", data).then( (res) => {\n\t        var iti = JSON.parse(res.data);\n\t        dispatch({\n\t\t\t\ttype: actionTypes.ITINERARY_LOAD,\n\t\t\t\titinerary: iti,\n\t\t\t\tgetItineraryLoading: false,\n\t\t\t});\n\t    });\n\t}\n}\n\n/**\n * Updates activities of itinerary, deletes the activity at fromIndex, and adds the activity\n * in the position of toIndex, and update it to redux state.\n * @memberof ReduxAction\n * @param {number} toIndex: index of intended new position of activity\n * @param {number} fromIndex: index of original position of activity\n */\nexport const itineraryUpdate = (toIndex, fromIndex) => {\n\treturn {\n\t\ttype: actionTypes.ITINERARY_UPDATE,\n\t\ttoIndex: toIndex,\n\t\tfromIndex: fromIndex,\n\t}\n}\n\n\n\n\n\n\n","export const AUTH_START = 'AUTH_START';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const AUTH_FAIL = 'AUTH_FAIL';\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\nexport const NEW_TRIP = 'NEW_TRIP'\nexport const MAP_BOUNDS_CHANGED = 'MAP_BOUNDS_CHANGED'\nexport const ACTIVITIES_LOAD = 'ACTIVITIES_LOAD'\nexport const ACTIVITIES_START = 'ACTIVITIES_START'\nexport const ACTIVITY_ADD = 'ACTIVITY_ADD'\nexport const ACTIVITY_SUBTRACT = 'ACTIVITY_SUBTRACT';\nexport const ACTIVITY_CLEARALL = 'ACTIVITY_CLEARALL';\nexport const ITINERARY_START = 'ITINERARY_START'\nexport const ITINERARY_LOAD = 'ITINERARY_LOAD'\nexport const ITINERARY_UPDATE = 'ITINERARY_UPDATE'","\n// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\nimport { Link } from 'react-router-dom';\nimport \"./CSS/navBar.css\";\n\n/**\n * Component, renders the Navigation Bar\n * Should be able to show whether a user is logged in from here.\n * @memberof Component\n * @param {ReduxState} user: Contains information about user if logged in. (e.g. token, username)\n */\nclass NavBar extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<nav className=\"navbar fixed-top navbar-expand-lg\" id =\"nav1\">\n\t\t\t<Link to=\"/\" className=\"navbar-brand\" href=\"#\">trippyy</Link>\n\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\n\t\t\t<div className=\"collapse navbar-collapse col-11\" id=\"navbar-nav\" >\n\t\t\t<ul className=\"navbar-nav justify-content-center\">\n\n\t\t\t<li className=\"nav-item\">\n\t\t\t<Link to=\"/\" className =\"nav-link\"> Home </Link>\n\t\t\t</li>\n\n\t\t\t<li className=\"nav-item\">\n\t\t\t<Link to=\"/mytrips\" className =\"nav-link\"> My Trips<span className=\"sr-only\">(current)</span></Link>\n\t\t\t</li>\n\n\t\t\t{\n\t\t\t\tthis.props.isAuthenticated ? \n\t\t\t\t<React.Fragment>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link to= \"/\" className =\"nav-link\" onClick = {this.props.logout}>\n\t\t\t\tLogout\n\t\t\t\t</Link>\n\t\t\t\t</li>\n\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link to=\"/mytrips\" className=\"nav-link\" id=\"accountLink\">Account: {this.props.user.username}</Link>\n\t\t\t\t</li>\n\t\t\t\t</React.Fragment>\n\t\t\t\t:\n\n\t\t\t\t<React.Fragment>\n\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link to={{\n\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\tstate: { from: this.props.from }\n\t\t\t\t}} className=\"nav-link\" id=\"loginLink\"> Login </Link>\n\t\t\t\t</li>\n\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link to=\"/signup\" className=\"nav-link\" id=\"signupLink\"> Signup </Link>\n\t\t\t\t</li>\n\n\t\t\t\t</React.Fragment>\n\n\t\t\t}\n\t\t\t</ul>\n\t\t\t</div>\n\t\t\t</nav>);\n\n\t}\n\n}\n\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t// Basic stats needed for NAV ------------\n\t\tisAuthenticated: state.user !== null,\n\t\tuser: state.user\n\t\t// Basic stats needed for NAV ------------\n\t}\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tlogout: () => dispatch(actions.logout())\n\t}\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);","import React, { Component } from 'react';\n\n\nimport 'react-dates/initialize';\nimport 'react-dates/lib/css/_datepicker.css';\n\nimport { DateRangePicker } from 'react-dates';\n\n/**\n * Component, renders calendar for entering dates of trip.\n * @memberof Component\n * @param {updateDates} Method: passed from parent to update date information.\n * @returns Rendered calendar to input dates easily\n */\nclass Calendar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startDate: null,\n      endDate: null,\n      focusedInput: null,\n    };\n  }\n\n  render() {\n    return (\n        <DateRangePicker\n          startDateId=\"startDate\"\n          endDateId=\"endDate\"\n          startDate={this.state.startDate}\n          endDate={this.state.endDate}\n          onDatesChange={({ startDate, endDate }) => \n            { \n              this.setState({ startDate, endDate });\n              console.log(\"Start: \");\n              console.log(startDate);\n              console.log(\"End: \")\n              console.log(endDate);\n              if (endDate !== null && startDate !== null) {\n                this.props.updateDates(startDate.format(\"YYYY-MM-DD\"), endDate.format(\"YYYY-MM-DD\"));\n              }\n            }\n          }\n          focusedInput={this.state.focusedInput}\n          onFocusChange={(focusedInput) => { this.setState({ focusedInput })}}\n        />\n    );\n  }\n}\n\nexport default Calendar;\n","import React, { Component } from 'react';\n\n\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from 'react-places-autocomplete';\n\n/**\n * Component, renders input bar for entering destination city of trip.\n * @memberof Component\n * @param {updateCountry} Method: passed from parent to update country information.\n * @returns Rendered input bar with autocomplete functionality\n */\nclass Autocomplete extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { address: '' };\n  }\n\n  /**\n  * Called upon any character input/delete.\n  * @param {String} address: Address inputted by user\n  */\n  handleChange = address => {\n    this.setState({ address });\n    this.props.updateCountry(address, null);\n  };\n\n  /**\n  * Called when user selects a City, updateCountry called upon selection.\n  * @param {updateCountry} Method: passed from parent to update country information.\n  * @param {String} address: Address inputted by user\n  */\n  handleSelect = address => {\n    this.setState({ address });\n    geocodeByAddress(address)\n    .then(results => getLatLng(results[0]))\n    .then(latLng => this.props.updateCountry(address, latLng))\n    .catch(error => console.log(error));\n  };\n\n  searchOptions = {\n    types: ['(regions)']\n  }\n\n  render() {\n    return (\n      <PlacesAutocomplete\n      value={this.state.address}\n      onChange={this.handleChange}\n      onSelect={this.handleSelect}\n      searchOptions={this.searchOptions}\n      highlightFirstSuggestion={true}\n      >\n      {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n        <div>\n        <input\n        {...getInputProps({\n          placeholder: 'Search City',\n          className: 'location-search-input',\n        })}\n        />\n        <div className=\"autocomplete-dropdown-container\">\n        {loading}\n        {suggestions.map(suggestion => {\n          const className = suggestion.active\n          ? 'suggestion-item--active'\n          : 'suggestion-item';\n                // inline style for demonstration purpose\n                const style = suggestion.active\n                ? { backgroundColor: '#fafafa', cursor: 'pointer' }\n                : { backgroundColor: '#ffffff', cursor: 'pointer' };\n                return (\n                  <div\n                  {...getSuggestionItemProps(suggestion, {\n                    className,\n                    style,\n                  })}\n                  >\n                  <span>{suggestion.description}</span>\n                  </div>\n                  );\n              })}\n        </div>\n        </div>\n        )}\n      </PlacesAutocomplete>\n      );\n  }\n}\n\nexport default Autocomplete","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport \"./CSS/InputForm.css\"\nimport Calendar from \"./Calendar\"\nimport { Spinner } from 'react-bootstrap';\nimport Autocomplete from './Autocomplete'\n\n/**\n * Component, renders input form for user to input City and dates of trip.\n * @memberof Component\n * @param {user} Redux-state: Contains information about user if logged in. (e.g. token, username)\n * @param {ReduxAction} newTrip: Updates redux state with new trip information.\n */\nclass InputForm extends Component {\n\n\tstate = {\n\t\tnewTripCreated: false,\n\t\tgoToShoppingPage: false,\n\t}\n\n\t/** \n\t* Called from component Calendar, in which upon input of dates, local state dates would be updated\n\t* @param {String} startDate: start date of trip.\n\t* @param {String} endDate: start date of trip.\n\t*/\n\tupdateDates = (startDate, endDate) => {\n\t\tthis.setState({startDate, endDate});\n\t}\n\n\t/** \n\t* Called from component Autocomplete, in which upon input of country, local state country would be updated\n\t* @param {String} countryName: name of country.\n\t* @param {Object} latLng: coordinates of country.\n\t*/\n\tupdateCountry = (countryName, latLng) => {\n\t\tthis.setState({countryName, latLng});\n\t}\n\n\t/** Called upon pressing the submit button, creates a new trip, \n\t* and checks for basic input validation before submitting, \n\t* and calling the redux-action (newTrip) to update redux-state with trip information.\n\t* @param {ReduxAction} newTrip: Updates redux state with new trip information.\n\t*/\n\tnewTrip = (event) => {\n\t\tif (this.state.startDate == null || this.state.endDate == null) {\n\t\t\talert(\"Please choose dates first!\");\n\t\t} else if (this.state.countryName == null || this.state.latLng == null) {\n\t\t\talert(\"Please select a country from the list!\");\n\t\t} else {\n\t\t\tevent.preventDefault();\n\t\t\tthis.props.newTrip(this.state.countryName, this.state.latLng[\"lat\"], this.state.latLng[\"lng\"], this.state.startDate, this.state.endDate);\n\t\t\tthis.setState({newTripCreated: true});\n\t\t}\n\t}\n\n\t//If new trip created is true, and loading is complete, then go to shopping page.\n\t// static getDerivedStateFromProps(nextProps, prevState){\n\t//   if (nextProps.loading===false && prevState.newTripCreated===true){\n\t//      return { goToShoppingPage: true };\n\t//   }\n\t//   else return null;\n\t// }\n\n\t//Happens upon receiving updated information.\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    \tif (this.props.loading===false && this.state.newTripCreated===true) {\n    \t\tthis.props.history.push(\"/shopping\");\n    \t}\n    }\n\n\trender() {\n\t\treturn (\n\t      <div className = \"container-fluid align-items-center inputForm\">\n\t      \t{\n\t    \t\t (this.props.isAuthenticated) ?\n\t    \t\t\t <h1>Hello, {this.props.user.username}!</h1> : (<h1>Hello stranger:)</h1>)\n\t    \t}\n\t          <div className = \"jumbotron\">\n\t              <form onSubmit = {this.newTrip}> \n\t                <div>\n\t                \t<h3> Enter Country: </h3>\n\t                \t<Autocomplete updateCountry={this.updateCountry} name = \"country\"/>\n\t                </div>\n\n\t                <div className =\"inputForm\">\n\t                \t<h3> Enter dates: </h3>\n\t                \t<Calendar updateDates={this.updateDates}/>\n\t                </div>\n\t                \n\t                <div className = \"inputForm\">\n\t                \t{ !this.props.loading ? \n\t                \t\t<button> Submit </button> \n\t                \t\t:\n\t\t\t\t\t\t\t<Spinner animation=\"border\" role=\"status\">\n\t\t\t\t\t\t\t  <span className=\"sr-only\">Loading...</span>\n\t\t\t\t\t\t\t</Spinner>\n\n\t                \t}\n\t                </div>\n\t              </form>\n\n\t              \n\t          </div>\n\t      </div>);\n\n\t}\n\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuthenticated: state.user !== null,\n        user: state.user,\n        loading: state.loading\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        newTrip: (tripCountry, tripLat, tripLng, startDate, endDate) => dispatch(actions.newTrip(tripCountry, tripLat, tripLng, startDate, endDate)),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InputForm);\n","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport NavBar from '../Components/navBar';\nimport InputForm from '../Components/InputForm'\nimport \"./CSS/global.css\"\n\n/** Container, renders sign up page.\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {Component} InputForm, renders input form to enter name of country\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n* @param {ReduxAction} newTrip, updates redux state of updated trip info\n*/\nclass StartPage extends Component {\n\n\tcomponentDidMount() {\n\t\t//Updates login status into redux.\n\t\tconsole.log(JSON.stringify(window.google))\n\t\tthis.props.onTryAutoSignup();\n\t\tthis.props.checkTrip();\n\t}\n\n\trender() {\n\t  return (\n\t    <div >\n\t    \t<NavBar from={this.props.location.pathname}/>\n\t    \t<InputForm history={this.props.history} />\n\t    \t\n\t    </div>\n\t  );\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t}\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tonTryAutoSignup: () => dispatch(actions.authCheckState()),\n\t\tcheckTrip: () => dispatch(actions.checkTrip())\n\t}\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(StartPage);\n","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport NavBar from '../Components/navBar';\nimport \"./CSS/global.css\"\nimport { Spinner } from 'react-bootstrap';\n\n/** Container, renders login page.\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n* @param {ReduxAction} authLogin, updates redux state of user with logged in information.\n*/\nclass Login extends Component {\n\n    componentDidMount() {\n      //Updates login status into redux.\n      this.props.onTryAutoSignup();\n\n      //Checks if logged in, redirect to mainpage/startpage.\n      if (localStorage.user !== null && localStorage.user !== undefined) {\n        this.props.history.push('/');\n      }\n    }\n\n    //Happens upon receiving updated login information.\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        //Checks where the page came from, if legit page, then redirect to where they came from.\n        if (this.props.isAuthenticated) {\n          if (this.props.location.state === undefined || this.props.location.state === null) {\n            this.props.history.push('/');\n          } else {\n            const from = this.props.location.state.from;\n            this.props.history.push(from);\n            this.setState({from: null});\n          }\n        }\n    }\n    /**\n    * Called upon submission of login form, then calls redux-action (authLogin) to login and update redux state.\n    * @param {Object} event: contains form information about username and password.\n    */\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.onAuth(event.target.username.value, event.target.password.value);\n      }\n\n    render() {\n        return (\n          <div className = \"container-fluid align-items-center\">\n              <NavBar from={this.props.location.pathname}/>\n              <div className = \"jumbotron startBox\">\n                <h1> Login</h1> \n                  <form onSubmit={this.handleSubmit}>\n                    <div className = \"element\">\n                      <input type = \"text\" name = \"username\" placeholder = \"Enter Username\" />\n                    </div>\n                    \n                    <div className = \"element\">\n                      <input type = \"password\" name = \"password\" placeholder = \"Enter Password\" />\n                    </div>\n                    {\n                      this.props.loading ? \n                        <Spinner animation=\"border\" role=\"status\" className = \"element\">\n                          <span className=\"sr-only\">Loading...</span>\n                        </Spinner>\n                      :\n                        <button className = \"element\" type=\"submit\" value = \"Submit\"> Submit </button>\n                    }\n                  </form>\n              </div>\n          </div>);\n\n    }\n\n}\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n      isAuthenticated: state.user !== null,\n      loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n        onAuth: (username, password) => dispatch(actions.authLogin(username, password)) \n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport NavBar from '../Components/navBar';\nimport { Spinner } from 'react-bootstrap';\n\n/** Container, renders sign up page.\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n* @param {ReduxAction} authSignup, updates redux state of new user sign up info.\n*/\nclass Signup extends Component {\n\n    componentDidMount() {\n      //Updates login status into redux.\n      this.props.onTryAutoSignup();\n\n      //If user is logged in, redirect to main page.\n      if (localStorage.user !== null && localStorage.user !== undefined) {\n        alert(\"Please logout to create a new account\");\n        this.props.history.push('/');\n      }\n    }\n\n    //Happens upon receiving updated login information.\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.isAuthenticated) {\n            this.props.history.push('/');\n        }\n    }\n\n    /**\n    * Called upon submission of signup form, then calls redux-action (authLogin) to signup and update redux state.\n    * @param {Object} event: contains form information about username, password and email\n    */\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.onAuth(event.target.username.value, event.target.email.value,\n          event.target.password1.value, event.target.password2.value);\n      }\n\n    render() {\n        return (\n          <div className = \"container-fluid align-items-center\">\n              <NavBar from={this.props.location.pathname}/>\n              \n              <div className = \"jumbotron startBox\">\n                <h1> SIGN UP</h1>\n                  <form onSubmit={this.handleSubmit}>\n                    <div className = \"element\">\n                      <input type = \"text\" name = \"username\" placeholder = \"Enter Username\" />\n                    </div>\n                    \n                    <div className = \"element\">\n                      <input type = \"text\" name = \"email\" placeholder = \"Enter Email\" />\n                    </div>\n\n                    <div className = \"element\">\n                      <input type = \"password\" name = \"password1\" placeholder = \"Enter Password\" />\n                    </div>\n\n                    <div className = \"element\">\n                      <input type = \"password\" name = \"password2\" placeholder = \"Enter Password again\" />\n                    </div>\n                    {\n                      this.props.loading ? \n                        <Spinner animation=\"border\" role=\"status\" className = \"element\">\n                          <span className=\"sr-only\">Loading...</span>\n                        </Spinner>\n                      :\n                        <button className = \"element\" type=\"submit\" value = \"Submit\"> Submit </button>\n                    }\n                  </form>\n              </div>\n          </div>);\n\n    }\n\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      loading: state.loading,\n      isAuthenticated: state.user !== null\n\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAuth: (username, email, password1, password2) => dispatch(actions.authSignup(username, email, password1, password2)),\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n        \n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport axios from \"axios\";\nimport NavBar from '../Components/navBar';\nimport { Spinner } from 'react-bootstrap';\n\nconst DATABASE_URL = \"https://trippyy-backend.herokuapp.com/\";\n\n/** Container, renders my trips page.\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n*/\nclass MyTrips extends Component {\n\tstate = {\n\t\ttripIDs: [],\n\t\ttrips: [],\n\t\tlocal_loading: null\n\t}\n\n\t/** \n\t* Called upon page load, loads trips from backend.\n\t*/\n\tloadTrips = () => {\n\t\ttry {\n\t\t\tconst user = JSON.parse(localStorage.user);\n\t\t\taxios.get(DATABASE_URL + \"api/users/\" + user['id'], {\n\t\t\t\theaders: {Authorization: \"Token \" + user['token']}\n\t\t\t}).then(res => {\n\t\t\t\tthis.setState({tripIDs: res.data.trips});\n\t\t\t}).then(res => {\n\t\t\t\t// If no trips, finish loading.\n\t\t\t\tif (this.state.tripIDs.length <= 0) {\n\t\t\t\t\tthis.setState({local_loading: false});\n\t\t\t\t}\n\n\t\t\t\t// If have trips, get trips.\n\t\t\t\tfor (let i = 0; i < this.state.tripIDs.length; i++) {\n\t\t\t\t\taxios.get(DATABASE_URL + \"api/trips/\" + this.state.tripIDs[i], \n\t\t\t\t\t{\n\t\t\t\t\t\theaders: {Authorization: \"Token \" + user['token']}\n\t\t\t\t\t}).then( res => {\n\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t{trips: [...this.state.trips, res.data]}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t//If it is loaded last item, then change loading to false.\n\t\t\t\t\t\tif (i === this.state.tripIDs.length - 1) {\n\t\t\t\t\t\t\tthis.setState({local_loading: false});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\t\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (error) {\n\t\t\talert(error);\n\t\t\tthis.props.history.push(\"/\");\n\t\t}\n\t}\n\tcomponentDidMount() {\n\n\t\tthis.setState({local_loading: true});\n\n\t\t//Updates login status to redux.\n\t\tthis.props.onTryAutoSignup();\n\n\t\t//If user is not logged in, redirect to Login page\n\t\tif (localStorage.user === null || localStorage.user === undefined) {\n\t\t\tthis.props.history.push({\n\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\tstate: { from: this.props.location.pathname }\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.loadTrips()\n\t\t}\n\n\t\t// Loads trips from backend assuming logged in, catch doesnt handle!\n\t\t// Need to add checks \n\t\t\n\t}\n\nrender() {\n\treturn (\n\t\t<React.Fragment>\n\t\t<NavBar from={this.props.location.pathname}/>\n\t\t<div className = \"jumbotron startBox\">\n\t\t<h1> My Trips </h1>\n\n\t\t{ \n\t\t\tthis.state.local_loading ? \n\t\t\t\t<Spinner animation=\"border\" role=\"status\">\n\t\t\t\t  <span className=\"sr-only\">Loading...</span>\n\t\t\t\t</Spinner>\n\t\t\t:\n\t\t\t\t(this.state.trips.length > 0) ? \n\t\t\t\t\t<ul>\n\t\t\t\t\t{this.state.trips.map((value,index) => <li key={index}> {value.tripName} </li>)}\n\t\t\t\t\t</ul>\n\t\t\t\t: \n\t\t\t\t\t<p> No trips available </p>\n\t\t\t\t\n\t\t}\n\t\t</div>\n\n\t\t</React.Fragment> \n\t\t);\n}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tisAuthenticated: state.user !== null,\n\t\tuser: state.user\n\t}\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tonTryAutoSignup: () => dispatch(actions.authCheckState()),\n\t}\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(MyTrips);","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\nimport \"./CSS/Activity.css\";\n\n\n/**\n * Component, renders a single activity.\n * @memberof Component\n * @param {Object} value: details of the activity\n * @param {number} displayIndex: index to show in website\n * @param {number} index: index of activity\n */\nclass Activity extends Component{\n\trender() {\n\t\tvar activityClass;\n\t\tif (this.props.index < 10) {\n\t\t\tactivityClass = \"activityTop\"\n\t\t} else {\n\t\t\tactivityClass = \"activityBottom\"\n\t\t}\n\t\treturn (\n\t\t<div>\n\t\t\t{this.props.value.added === true ?\n\t\t\t\t\t<div id=\"added\" className={activityClass} onClick={() => {\n\t\t\t\t\t\tthis.props.activityClickHandlerToSubtract(this.props.index);\n\t\t\t\t\t\tconsole.log(this.props.index);}}>\n\t\t\t\t\t\t{(this.props.displayIndex) + 1} : {this.props.value.name}\n\t\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t\t<div id=\"notAdded\" className={activityClass} onClick={() => this.props.activityClickHandlerToAdd(this.props.index)}>\n\t\t\t\t\t\t{(this.props.displayIndex) + 1} : {this.props.value.name}\n\t\t\t\t\t</div>\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default Activity;","// Basic Imports\nimport React, { Component, Fragment } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport { Spinner , Button} from 'react-bootstrap';\nimport \"./CSS/ActivityList.css\";\nimport Activity from './Activity'\n\nconst API_KEY = \"AIzaSyDyb0_iNF_gpoxydk5Vd8IpWj1Hy1Tp5Vc\"\n\n\n\n/**\n * Component, renders a list of activities.\n * @memberof Component\n * @param {Component} Activity\n * @param {ReduxAction} activitiesLoad: to load activities from Google API\n * @param {ReduxAction} activitiesAdd: to update redux state when adding an activity to the list of selected activities upon selection\n * @param {ReduxState} map: Redux object with map information (e.g. lng/lat of center, and bounds)\n * @param {ReduxAction} activitiesShown: Redux object with information about the list of activities currently rendered\n * @returns Rendered list of activities\n */\nclass ActivityList extends Component{\n    state = {\n        activities: [],\n        localLoading: false,\n        items: 20,\n        isScrolling: null,\n    }\n\n    convertSpaceToPlus(text) {\n        for (let i = 0; i < text.length; i++) {\n            text = text.replace(\" \", \"+\")  \n        }\n        return text\n    } \n\n    activityClickHandlerToAdd = (index) => {\n            this.props.activitiesAdd(index);\n    }\n\n    activityClickHandlerToSubtract = (index) => {\n            this.props.activitiesSubtract(index);\n    }\n\n    componentDidMount() {\n        // Data parameters as such: \n        // for api/TextSearch/ - key: API_KEY, query: text query\n        // for api/BoundedTextSearch/ - key: API_KEY, query: text query, lat: lat of center, lng: lng of center, radius: radius of map\n        // for api/NextKeySearch/ - key: API_KEY, next_page_token: next page token\n\n        if (localStorage.trip !== undefined) {\n            const data = {\n                dataType: \"TEXTSEARCH\",\n                key: API_KEY,\n                query: this.convertSpaceToPlus(JSON.parse(localStorage.trip)[\"country\"] + \" points of interest\"),\n                category: \"General\",\n            }\n            \n            // Retrieves Singapore places of interest.\n            this.props.activitiesLoad(data);\n        }\n        \n        // Use this if were to implement infinite scrolling instead.\n        // var timeout = null;\n        // this.refs.myscroll.addEventListener(\"scroll\", () => {\n        //     // timeout = setTimeout( () => console.log(\"hey\"), 500);\n        //     const endHeight = this.refs.myscroll.scrollHeight - this.refs.myscroll.clientHeight\n            \n        //     if (this.refs.myscroll.scrollTop == 0) {\n        //         // this.loadPrev(); when the component mounts it will auto call previous :-()\n        //     } else if (this.refs.myscroll.scrollTop >= endHeight) {\n        //         this.loadNext();\n        //     }\n\n        // });\n    }\n\n    /**\n    * Called upon pressing the next page button.\n    * Function to load next page of activities. If next page was loaded before, call\n    * redux-action (activitiesLoad) with \"GONEXT\" parameter to retrieve next page, else\n    * call with \"NEXTKEYSEARCH\" to retrieve next page from calling Google API.\n    * @param {ReduxAction} activitiesLoad: to load activities from Google API\n    */\n    loadNext = () => {\n        this.refs.myscroll.scrollTop = 0;\n        if (!this.props.isLastPage) {\n            if (this.props.activitiesShown.hasNextPageLoaded) {\n                const data = {\n                    dataType: \"GONEXT\",\n                    pageNumber: this.props.activitiesShown.pageNumber\n                }\n                this.props.activitiesLoad(data);\n                return;\n            } else {\n                const data = {\n                    dataType: \"NEXTKEYSEARCH\",\n                    key: API_KEY,\n                    next_page_token: this.props.activitiesShown.nextPageToken,\n                }\n                this.props.activitiesLoad(data);\n                return;\n            }\n        } \n    }\n\n    /**\n    * Called upon pressing the previous page button.\n    * Function to load prev page of activities. Call redux-action (activitiesLoad) with\n    * \"GOPREV\" parameter to retrieve activities from prev page.\n    * @param {ReduxAction} activitiesLoad: to load activities from Google API\n    */\n    loadPrev = () => {\n        this.refs.myscroll.scrollTop = 0;\n        if (!this.props.isFirstPage) {\n            const data = {\n                dataType: \"GOPREV\",\n            }\n            this.props.activitiesLoad(data);\n        }\n\n    }\n\n    /**\n    * Called upon pressing any of the category buttons to change category.\n    * Function to load a new category of activities. Call redux-action (activitiesLoad) with\n    * \"TEXTSEARCH\" parameter to retrieve activities from Google API with new category.\n    * @param {ReduxAction} activitiesLoad: to load activities from Google API\n    */\n    changeCategory = (event) => {\n        if (event.target.value === \"General\") {\n            const data = {\n                dataType: \"TEXTSEARCH\",\n                key: API_KEY,\n                query: this.convertSpaceToPlus(JSON.parse(localStorage.trip)[\"country\"] + \" points of interest\"),\n                category: event.target.value,\n            }\n            // Retrieves Singapore places of interest.\n            this.props.activitiesLoad(data);\n            console.log(\"Previous Category: \" + this.props.activitiesShown.currentCategory);\n        \n        } else {\n            const data = {\n                dataType: \"TEXTSEARCH\",\n                key: API_KEY,\n                query: this.convertSpaceToPlus(JSON.parse(localStorage.trip)[\"country\"] + \" \" + event.target.value + \" attractions\"),\n                category: event.target.value,\n            }\n            console.log(data.query);\n            // Retrieves Singapore places of interest.\n            this.props.activitiesLoad(data);\n            console.log(\"Previous Category: \" + this.props.activitiesShown.currentCategory);\n        }\n    }\n\n    //Make all the activitiesAdded {added: false}\n    //then Clear the entire array of ActivitiesAdded\n\n    clearAll = () => {\n        if (this.props.trip.activitiesAdded.length !== 0) {\n        // var activitiesAddedArray = this.props.trip.activitiesAdded;\n            this.props.clearAllActivities();\n            \n            // activitiesAddedArray.map(activity => activity.added = false);\n\n            // for (let i = 0; i < activitiesAdded.length; i++) {\n            //     this.setState({activitiesAddedArray[i]: {added: false}}); \n            //     // this.props.activitiesSubtract(activitiesAdded[i].index);\n            //     // console.log(activitiesAdded[i]);\n            // }\n\n            // activitiesAddedArray = [];\n            // this.props.trip.activitiesAddedIds = [];\n        }\n        // console.log(this.props.trip.activitiesAdded);\n    }\n\n\n    //Category Buttons: Buttons change to grey (\"secondary\") when they are clicked, \n    //and remain turquoise (\"info\") when they are not.\n    render() {\n        return (\n            <div id=\"activityList\" ref = \"myscroll\">\n            { this.props.activitiesLoading ?\n\n                <Spinner animation=\"border\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                </Spinner> \n\n                : \n                <Fragment>\n                <div>\n                    <Button className=\"customButton\" onClick={this.clearAll} value=\"Reset\"\n                        variant=\"warning\">Clear All</Button>\n                    </div>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"General\"\n                        variant={\"General\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>General</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Food\"\n                        variant={\"Food\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Food</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Outdoors\"\n                        variant={\"Outdoors\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Outdoors</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Art & Culture\"\n                        variant={\"Art & Culture\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Art & Culture</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Beaches\"\n                        variant={\"Beaches\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Beaches</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Museums\"\n                        variant={\"Museums\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Museums</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Amusement Parks\"\n                        variant={\"Amusement Parks\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Amusement Parks</Button>\n                      <Button className=\"customButton\" onClick={this.changeCategory} value=\"Local Favorites\"\n                        variant={\"Local Favorites\" === this.props.activitiesShown.currentCategory ? \"secondary\" : \"info\"}>Local Favorites</Button>\n                    {\n                        (!this.props.isFirstPage) &&\n                            <Button id=\"prevPageButton\" variant=\"primary\" className=\"customButton\" onClick ={this.loadPrev}> Scroll to Prev Page </Button>\n                    }\n\n                    {this.props.activitiesShown.currentList.map((value,index) => \n                        <Activity\n                        key={index} \n                        value={value} \n                        displayIndex={index + this.props.activitiesShown.firstActivityCounter} \n                        activityClickHandlerToAdd={this.activityClickHandlerToAdd}\n                        activityClickHandlerToSubtract={this.activityClickHandlerToSubtract}\n                        index={index}\n                        />)\n                    \n                    }\n\n                    {\n                        this.props.isLastPage ?\n                            <div> No more! Try changing category or moving the map </div>\n                        :\n                            <Button variant=\"primary\" className=\"customButton\" id=\"nextPageButton\" onClick ={this.loadNext}> Scroll to Next Page </Button>\n                    }\n                </Fragment>\n            }\n            </div>\n            );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        trip: state.trip,\n        map: state.map,\n        activitiesShown: state.activitiesShown,\n        activitiesLoading: state.activitiesLoading,\n        isLastPage: (!state.activitiesShown.hasNextPageLoaded) && (state.activitiesShown.nextPageToken === -1),\n        isFirstPage: state.activitiesShown.pageNumber === 0,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        activitiesLoad: (data) => dispatch(actions.activitiesLoad(data)),\n        activitiesAdd: (index) => dispatch(actions.activitiesAdd(index)),\n        activitiesSubtract: (index) => dispatch(actions.activitiesSubtract(index)),\n        clearAllActivities: () => dispatch(actions.clearAllActivities()),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivityList);","// Basic Imports\nimport React, { Component, Fragment } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport \"./CSS/SelectedActivityList.css\";\nimport { Link } from 'react-router-dom';\n\n/**\n * Component, renders activities currently added into the trip.\n * @memberof Component\n * @param {ReduxState} trip: Contains information about current trip (e.g. trip name/date, and list of current activities added)\n * @param {ReduxAction} itineraryLoad: Updates redux state to generate itinerary.\n */\nclass SelectedActivityList extends Component{\n    componentDidMount() {\n    }\n\n    state = {\n    }\n\n    /**\n    * Called upon clicking button to generate itinerary. Calls Redux-action (itineraryLoad) to generate.\n    * @param {ReduxAction} itineraryLoad: Updates redux state to generate itinerary.\n    */\n    getItinerary = () => {\n        const data = {\n            lengthOfTrip: 5,\n            activitiesAdded: this.props.trip.activitiesAdded\n        }\n        this.props.itineraryLoad(data);\n    }\n\n    closeModal = () => {\n        this.setState({open: false})\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <Link to=\"/results\" className=\"itiButton\" onClick={this.getItinerary} value=\"general\">Get Itinerary</Link>\n            \t<div id=\"selectedActivityList\">\n            \t\t{\n            \t\t\tthis.props.trip[\"activitiesAdded\"].map( (value, index) => <p key={index}>{value.name}</p>)\n            \t\t}\n            \t</div>\n            </Fragment>)\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        trip: state.trip,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        itineraryLoad: (data) => dispatch(actions.itineraryLoad(data)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedActivityList);","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport NavBar from '../Components/navBar';\nimport Map from '../Components/Map'\nimport ActivityList from '../Components/ActivityList'\nimport SelectedActivityList from '../Components/SelectedActivityList'\nimport \"./CSS/global.css\"\n\n/** Container, renders shopping page\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {Component} Map, renders map.\n* @param {Component} ActivityList, renders activity list.\n* @param {Component} SelectedActivityList, renders selected activities list.\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n*/\nclass Shopping extends Component {\n\n    componentDidMount() {\n      if (localStorage.getItem('trip') === null || localStorage.getItem('trip') === undefined) {\n        this.props.history.push('/');\n        return;\n      } \n      //Updates login status and trip status into redux.\n      this.props.onTryAutoSignup();\n      this.props.checkTrip();\n      \n\n    }\n\n    //Happens upon receiving updated login information.\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n    }\n\n    render() {\n\n        return (\n          <div className = \"container-fluid align-items-center\">\n              <NavBar from={this.props.location.pathname}/>\n              <div className = \"startBox\">\n                <div className = \"row\">\n                  <div className = \"col-3\" id=\"selectedActivitiesBox\">\n                    <h2> Welcome to {this.props.trip[\"country\"]} </h2>\n                    <SelectedActivityList/>\n                  </div>\n                  <div className = \"col-3\" id=\"activitiesBox\">\n                    <h2> Activities: </h2>\n                    <ActivityList/>\n                  </div>\n\n                  <div className =\"col-6\">\n                    <Map/>\n                  </div>\n                </div>\n              </div>\n          </div>\n        );\n\n    }\n\n}\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n      isAuthenticated: state.user !== null,\n      trip: state.trip,\n      loading: state.loading,\n      error: state.error\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n        checkTrip: () => dispatch(actions.checkTrip()),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shopping);","// Basic Imports\nimport React, { Component } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport \"./CSS/Timetable.css\"\n\n/**\n * Component, renders activities currently added into the trip in a timetable manner,\n * enabling it to be customizable by dragging the blocks around.\n * @memberof Component\n * @param {ReduxState} trip: Contains information about current trip (e.g. trip name/date, and list of current activities added)\n * @param {ReduxAction} itineraryUpdate: Updates redux state to update itinerary.\n */\nclass Timetable extends Component {\n\n\tstate = {\n\t\tfromIndex: -1,\n\t\tfromDayIndex: -1,\n\t}\n\n\t/**\n\t* Called upon selection of activity block.\n\t* @param {event} Contains information about mouse location etc.\n\t*/\n\tonDragStart = (event) => {\n    \tthis.setState({fromIndex: event.target.dataset.index})\n    \tthis.setState({fromDayIndex: event.target.dataset.dayindex})\n\t}\n\n\t/**\n\t* Called everytime the mouse moves when dragging.\n\t* @param {event} Contains information about mouse location etc.\n\t*/\n\tonDragOver = (event) => {\n\t\tevent.preventDefault()\n\t\t//Defining the positions of the block\n\t\tconst toIndex = event.target.dataset.index;\n\t\tconst toDayIndex = event.target.dataset.dayindex;\n\t\tconst fromIndex = this.state.fromIndex;\n\t\tconst fromDayIndex = this.state.fromDayIndex;\n\n\t\t// If it is at the same position, do not run.\n\t\tif (toIndex === fromIndex && toDayIndex === fromDayIndex) {\n\t\t\treturn;\n\n\t\t// Update the itinerary in redux.\n\t\t} else if (toIndex !== undefined && toDayIndex !== undefined) {\n\t\t\tthis.props.itineraryUpdate([toDayIndex, toIndex], [fromDayIndex, fromIndex]);\n\t\t\tthis.setState({fromIndex: toIndex});\n\t\t\tthis.setState({fromDayIndex: toDayIndex});\n\t\t}\n\t}\n\n\n\t/**\n\t* Called when activity is dropped.\n\t* @param {event} Contains information about mouse location etc.\n\t*/\n\tonDrop = (event) => {\n\t\tevent.preventDefault();\n\t}\n\n\trender() {\n\t\tif (!this.props.trip[\"itinerary\"]) {\n\t\t\treturn <h1> loading </h1>\n\t\t}\n\t    return (\n\t\t    <div id=\"timetable\"\n\t\t    \t\tonDragOver={(event)=>this.onDragOver(event)}\n\t      \t\t\tonDrop={this.onDrop}>\n\t          {this.props.trip[\"itinerary\"].map( (value, dayindex) => (\n\t          \t<div className=\"day\">\n\t          \t\t{\n\t          \t\t\tvalue.map((value, index) => {\n\t          \t\t\t\tif (index !== 0) {\n\t\t\t\t          \treturn <div\n\t\t\t\t          \t\tkey={index}\n\t\t\t\t          \t\tdata-index={index}\n\t\t\t\t          \t\tdata-dayindex={dayindex}\n\t\t\t\t          \t\tdraggable\n\t\t\t\t          \t\tclassName=\"timetableActivity\"\n\t\t\t\t\t\t\t\tonDragStart = {this.onDragStart}\n\t\t\t\t\t\t\t    style ={{backgroundColor: value.bgcolor}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t    <p> {JSON.parse(value)[\"name\"]} </p>\n\t\t\t\t\t    \t</div>\n\t\t\t\t\t    \t}\n\t\t\t\t\t    \treturn null;\n\t\t\t\t\t    })\n\t\t\t\t    \t\n\t\t\t    \t}\n\t          \t</div>)\n\t          )}\n\t        </div>\n\t    );\n  \t}\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        trip: state.trip,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n    \titineraryUpdate: (toIndex, fromIndex) => dispatch(actions.itineraryUpdate(toIndex, fromIndex))\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Timetable);","// Basic Imports\nimport React, { Component, Fragment } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport \"./CSS/Results.css\"\nimport Timetable from '../Components/Timetable'\nimport NavBar from '../Components/navBar'\n\n/** Container, renders results page\n* @memberof Container\n* @param {Component} Navbar, renders navigation bar.\n* @param {Component} Timetable, renders timetable to display activities.\n* @param {ReduxAction} checkTrip, updates redux state of trip with local storage\n* @param {ReduxAction} authCheckState, updates redux state of user with local storage\n*/\nclass Results extends Component {\n    componentDidMount() {\n        this.props.checkTrip();\n        this.props.onTryAutoSignup();\n    }\n\n\trender() {\n\t\treturn (\n            <Fragment>\n                <NavBar from={this.props.location.pathname}/>\n                <div>\n                    <Timetable/>\n                </div>\n            </Fragment>);\n\t} \n\t        \n  \t\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        trip: state.trip,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n        checkTrip: () => dispatch(actions.checkTrip()),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Results);","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport StartPage from './Containers/StartPage';\nimport Login from './Containers/Login';\nimport Signup from './Containers/Signup';\nimport MyTrips from './Containers/MyTrips';\nimport Shopping from './Containers/Shopping';\nimport Results from './Containers/Results';\n\nconst BaseRoute = () => (\n\t<Switch> \n\t\t<Route exact path='/' component = {StartPage} />\n\t\t<Route exact path ='/login/' component = {Login} />\n\t\t<Route exact path ='/signup/' component = {Signup} />\n\t\t<Route exact path ='/mytrips' component = {MyTrips} />\n\t\t<Route exact path ='/shopping' component = {Shopping} />\n\t\t<Route exact path ='/results' component = {Results} />\n\n\t</Switch> );\n\nexport default BaseRoute;\n\t\t\n","import * as actionTypes from '../actions/actionTypes';\nimport {updateObject} from '../utility';\n\nconst initialState = {\n\terror: null,\n\tloading: false,\n\tactivitiesLoading: false,\n\tgetItineraryLoading: false,\n\n\tuser: null,\n\n\ttrip: {\n\t\t'country' : -1,\n\t\t'lat' : -1,\n\t\t'lng' : -1,\n\t\t'startDate': -1,\n\t\t'endDate' : -1,\n\t\t'activitiesAdded' : [],\n\t\t'activitiesAddedIds' : [],\n\t\t'itinerary' : [[]],\n\t},\n\n\tmap: {\n\t\t'bounds': {\n\t\t\t\"upper\": {\n\t\t\t\t\"lat\": -1,\n\t\t\t\t\"lng\": -1,\n\n\t\t\t}, \n\n\t\t\t\"lower\": {\n\t\t\t\t\"lat\": -1,\n\t\t\t\t\"lng\": -1,\n\t\t\t},\n\n            \"center\": -1,\n\n            \"radius\": -1,\n\t\t}\n\t},\n\n\tactivitiesShown: {\n\t\t\"currentList\": [],\n\t\t\"fullList\": [], \n\n\t\t\"currentCategory\": \"\", \n\t\t\"firstActivityCounter\": -1, \n\t\t\"pageNumber\": -1,\n\t\t\n\t\t\"nextPageToken\": -1,\n\n\t\t\"hasNextPageLoaded\": false,\n\t\t\"pageLoadedUpTo\": -1,\n\t}\n}\n\nconst authStart = (state, action) => {\n\treturn updateObject(state, {\n\t\terror: null,\n\t\tloading: true\n\t});\n}\n\nconst authSuccess = (state, action) => {\n\tconst user = {\n\t\t'id': action.userId,\n\t\t'token': action.token,\n\t\t'username': action.username\n\t}\n\t\n\treturn updateObject(state, {\n\t\tuser: user,\n\t\terror: null,\n\t\tloading: false,\n\t});\n}\n\nconst authFail = (state, action) => {\n\treturn updateObject(state, {\n\t\terror: action.error,\n\t\tloading: false\n\t});\n}\n\nconst authLogout = (state, action) => {\n\treturn updateObject(state, {\n\t\tuser: null,\n\t});\n}\n\nconst newTrip = (state, action) => {\n\treturn updateObject(state, {\n\t\ttrip: action.trip,\n\t\tloading: false\n\t})\n}\n\nconst updateBounds = (state, action) => {\n\tconst newMap = updateObject(state.map, {\n\t\tbounds: action.bounds\n\t})\n\n\treturn updateObject(state, {\n\t\tmap: newMap\n\t})\n}\n\nconst activitiesLoad = (state, action) => {\n\t// If load next page, get and display next page data, and add onto fullActivitiesShown list\n\tif (action.dataType === \"NEXTKEYSEARCH\") {\n\t\tconst newFullList = [...state.activitiesShown.fullList, action.activitiesShown ];\n\t\tconst activitiesShown = {\n\t\t\tcurrentList: action.activitiesShown,\n\t\t\tfullList: newFullList,\n\t\t\tcurrentCategory: action.category,\n\t\t\tpageLoadedUpTo: state.activitiesShown.pageNumber + 1,\n\t\t\tpageNumber: state.activitiesShown.pageNumber + 1,\n\t\t\tfirstActivityCounter: state.activitiesShown.firstActivityCounter + 20,\n\t\t\tnextPageToken: action.nextPageToken,\n\t\t}\n\t\treturn updateObject(state, {\n\t\t\tactivitiesShown: activitiesShown,\n\t\t\tactivitiesLoading: false,\n\t\t})\n\n\n\t// If the request was to go to a prev page, \n\t// ASSERT that fullList at this point would have activities added already.\n\t} else if (action.dataType === \"GOPREV\") {\n\t\tconst newCurrentList = [...state.activitiesShown.fullList[state.activitiesShown.pageNumber - 1]]\n\t\tconst activitiesShown = updateObject(state.activitiesShown, {\n\t\t\tcurrentList: newCurrentList,\n\t\t\tcurrentCategory: action.category,\n\t\t\tpageNumber: state.activitiesShown.pageNumber - 1,\n\t\t\tfirstActivityCounter: state.activitiesShown.firstActivityCounter - 20,\n\t\t\thasNextPageLoaded: true,\n\t\t})\n\t\treturn updateObject(state, {\n\t\t\tactivitiesShown: activitiesShown,\n\t\t\tactivitiesLoading: false,\n\t\t})\n\n\n\t// If has next page loaded, pressing next page will call to this instead,\n\t// just reassign the activities shown and hasNextPageLoaded.\n\t} else if (action.dataType === \"GONEXT\") {\n\t\tconst newCurrentList = [...state.activitiesShown.fullList[state.activitiesShown.pageNumber + 1]]\n\t\tvar hasNextPageLoaded;\n\t\tif (state.activitiesShown.pageNumber + 1 >= state.activitiesShown.pageLoadedUpTo) {\n\t\t\thasNextPageLoaded = false\n\t\t} else {\n\t\t\thasNextPageLoaded = true\n\t\t}\n\t\tconst activitiesShown = updateObject(state.activitiesShown, {\n\t\t\tcurrentList: newCurrentList,\n\t\t\tcurrentCategory: action.category,\n\t\t\tpageNumber: state.activitiesShown.pageNumber + 1,\n\t\t\tfirstActivityCounter: state.activitiesShown.firstActivityCounter + 20,\n\t\t\thasNextPageLoaded: hasNextPageLoaded,\n\t\t})\n\t\treturn updateObject(state, {\n\t\t\tactivitiesShown: activitiesShown,\n\t\t\tactivitiesLoading: false,\n\t\t})\n\t}\n\n\n\t// If data type = bounded search or text search (meaning it is first load)\n\telse {\n\t\tconst activitiesShown = {\n\t\t\tcurrentList: action.activitiesShown,\n\t\t\tfullList: [action.activitiesShown],\n\t\t\tcurrentCategory: action.category,\n\n\t\t\tpageNumber: 0,\n\t\t\tfirstActivityCounter: 0,\n\t\t\tnextPageToken: action.nextPageToken,\n\t\t}\n\t\treturn updateObject(state, {\n\t\t\tactivitiesShown: activitiesShown,\n\t\t\tactivitiesLoading: false,\n\t\t})\n\t}\n}\n\nconst activitiesStart = (state, action) => {\n\treturn updateObject(state, {\n\t\tactivitiesLoading: true\n\t})\n}\n\nconst activitiesAdd = (state, action) => {\n\t// Retrieve trip for cache, can be done using state too, but both works.\n\tvar currentTrip = JSON.parse(localStorage.trip);\n\n\t// Retrieve activity that was added by referencing the index (id) \n\t// Update the activity such that {added: true}\n\tvar activityAdded = state.activitiesShown.currentList[action.index];\n\tactivityAdded = updateObject(activityAdded, {added: true});\n\n\t// Replace the activity in ActivitiesShown with a new one that says added:true\n\tvar activitiesShownCurrentList = [...state.activitiesShown.currentList];\n\tactivitiesShownCurrentList[action.index] = activityAdded;\n\n\tvar activitiesShownFullList = [...state.activitiesShown.fullList];\n\tactivitiesShownFullList[state.activitiesShown.pageNumber][action.index] = activityAdded;\n\n\tvar activitiesShown = updateObject(state.activitiesShown, {\n\t\tcurrentList: activitiesShownCurrentList,\n\t\tfullList: activitiesShownFullList,\n\t})\n\n\n\t// Merge all changes into currentTrip\n\tcurrentTrip['activitiesAdded'].push(activityAdded);\n\tcurrentTrip['activitiesAddedIds'].push(activityAdded.id)\n\n\t// Update currentTrip\n\tlocalStorage.setItem('trip', JSON.stringify(currentTrip));\n\n\treturn updateObject(state, {\n\t\ttrip: currentTrip,\n\t\tactivitiesShown: activitiesShown,\n\t})\n}\n\nconst activitiesSubtract = (state, action) => {\n\t// Retrieve trip for cache, can be done using state too, but both works.\n\tvar currentTrip = JSON.parse(localStorage.trip);\n\n\t// Retrieve activity that was selected/clicked on by referencing the index (id) \n\t// Update the activity such that {added: false}\n\tvar activitySelected = state.activitiesShown.currentList[action.index];\n\tactivitySelected = updateObject(activitySelected, {added: false});\n\n\t// Replace the activity in ActivitiesShown with a new one that says added: false\n\tvar activitiesShownCurrentList = [...state.activitiesShown.currentList];\n\tactivitiesShownCurrentList[action.index] = activitySelected;\n\n\tvar activitiesShownFullList = [...state.activitiesShown.fullList];\n\tactivitiesShownFullList[state.activitiesShown.pageNumber][action.index] = activitySelected;\n\n\tvar activitiesShown = updateObject(state.activitiesShown, {\n\t\tcurrentList: activitiesShownCurrentList,\n\t\tfullList: activitiesShownFullList,\n\t})\n\n\t// Merge all changes into currentTrip\n\t// currentTrip['activitiesAdded'].pop(activitySelected); //WRONG\n\t// currentTrip['activitiesAddedIds'].pop(activitySelected.id); //WRONG\n\n\tvar filteredTrip = currentTrip['activitiesAdded'].filter(\n\t\t(activity) => activity.name !== activitySelected.name);\n\n\tcurrentTrip['activitiesAdded'] = filteredTrip;\n\n\tvar filteredTripIds = currentTrip['activitiesAddedIds'].filter(\n\t\t(id) => id !== activitySelected.id);\n\t\n\tcurrentTrip['activitiesAddedIds'] = filteredTripIds;\n\n\t// Update currentTrip\n\tlocalStorage.setItem('trip', JSON.stringify(currentTrip));\n\n\treturn updateObject(state, {\n\t\ttrip: currentTrip,\n\t\tactivitiesShown: activitiesShown,\n\t})\n}\n\nconst clearAllActivities = (state, action) => {\n\t// Retrieve trip for cache, can be done using state too, but both works.\n\t// var currentTrip = JSON.parse(localStorage.trip);\n\n\tstate.trip.activitiesAdded.map(activity => updateObject(activity, {added: false}));\n\tstate.trip.activitiesAdded = [];\n\tstate.trip.activitiesAddedIds = [];\n\n\tlocalStorage.clear();\n\n\tstate.activitiesShown.currentList.map(activity => updateObject(activity, {added: false}));\n\t\n\treturn updateObject(state, {\n\t\ttrip: state.trip,\n\t\tactivitiesShown: state.activitiesShown,\n\t})\n}\n\n\n//ITINERARY --------------------------------------------------------------------------\nconst itineraryLoad = (state, action) => {\n\tconst trip = updateObject(state.trip, {\n\t\titinerary: action.itinerary\n\t})\n\n\treturn updateObject(state, {\n\t\ttrip: trip,\n\t\tgetItineraryLoading: false,\n\n\t})\n\n}\n\nconst itineraryStart = (state, action) => {\n\treturn updateObject(state, {\n\t\tgetItineraryLoading: true,\n\t})\n}\n\nconst itineraryUpdate = (state, action) => {\n\tvar currentIti = [...state.trip.itinerary];\n\tvar fromDay = currentIti[action.fromIndex[0]];\n\tvar toDay = currentIti[action.toIndex[0]];\n\tvar fromActivity = fromDay[action.fromIndex[1]]\n\n\t// Delete FROM activity\n\tfromDay.splice(action.fromIndex[1], 1);\n\n\t// Add TO activity\n\ttoDay.splice(action.toIndex[1], 0, fromActivity);\n\n\t// Update currentIti\n\tcurrentIti[action.fromIndex[0]] = fromDay;\n\tcurrentIti[action.toIndex[0]] = toDay;\n\n\tconst trip = updateObject(state.trip, {\n\t\titinerary: currentIti,\n\t})\n\treturn updateObject(state, {\n\t\ttrip: trip,\n\t})\n\n}\n\nconst reducer = (state=initialState, action) => {\n\tswitch(action.type) {\n\n\t\tcase actionTypes.ACTIVITY_SUBTRACT: return activitiesSubtract(state, action);\n\t\tcase actionTypes.ACTIVITY_ADD: return activitiesAdd(state, action);\n\t\tcase actionTypes.ACTIVITIES_START: return activitiesStart(state, action);\n\t\tcase actionTypes.ACTIVITIES_LOAD: return activitiesLoad(state, action);\n\t\tcase actionTypes.ACTIVITY_CLEARALL: return clearAllActivities(state, action);\n\t\tcase actionTypes.MAP_BOUNDS_CHANGED: return updateBounds(state, action);\n\t\tcase actionTypes.NEW_TRIP: return newTrip(state, action);\n\t\tcase actionTypes.AUTH_START: return authStart(state, action);\n\t\tcase actionTypes.AUTH_SUCCESS: return authSuccess(state, action);\n\t\tcase actionTypes.AUTH_FAIL: return authFail(state, action);\n\t\tcase actionTypes.AUTH_LOGOUT: return authLogout(state, action);\n\t\t\n\t\tcase actionTypes.ITINERARY_LOAD: return itineraryLoad(state, action);\n\t\tcase actionTypes.ITINERARY_START: return itineraryStart(state, action);\n\t\tcase actionTypes.ITINERARY_UPDATE: return itineraryUpdate(state, action);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default reducer","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport BaseRouter from './routes';\nimport { BrowserRouter as Router} from 'react-router-dom';\n// import * as serviceWorker from './serviceWorker';\n\nimport reducer from './store/reducers/reducer';\nimport { createStore , compose, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk' \n\nconst composeEnhances = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(reducer, composeEnhances(\n\t\tapplyMiddleware(thunk)\n\t));\n\n\n/**\n * ReduxAction\n * @module ReduxAction\n */\n\n /**\n * Components\n * @module Component\n */\n\n /**\n * Containers\n * @module Container\n */\n \nconst app = (\n\t<Provider store={store}>\n\t\t<Router>\n\t  \t\t<BaseRouter />\n\t  \t</Router>\n\t</Provider>);\n\nReactDOM.render(\n  app, document.getElementById('root')\n);"],"sourceRoot":""}