{"ast":null,"code":"import _classCallCheck from\"/Users/lixupeng/NUS ACADS/ORBITAL/trippyy-working/trippyy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lixupeng/NUS ACADS/ORBITAL/trippyy-working/trippyy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lixupeng/NUS ACADS/ORBITAL/trippyy-working/trippyy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lixupeng/NUS ACADS/ORBITAL/trippyy-working/trippyy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";// Basic Imports\nimport React,{Component,Fragment}from\"react\";// -------------------------------------------------------------------------\n//Imports needed for redux\nimport*as actions from'../store/actions/actions';import{connect}from'react-redux';// -------------------------------------------------------------------------\nimport axios from\"axios\";import NavBar from'../Components/navBar';import\"./CSS/global.css\";import{Spinner}from'react-bootstrap';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleSubmit=function(event){event.preventDefault();_this.props.onAuth(event.target.username.value,event.target.password.value);};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){//Updates login status into redux.\nthis.props.onTryAutoSignup();//Checks if logged in, redirect to mainpage.\nif(localStorage.token!==null&&localStorage.token!==undefined){this.props.history.push('/');}}//Happens upon receiving updated login information.\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){//Checks where the page came from, if legit page, then redirect to where they came from.\nif(this.props.isAuthenticated){if(this.props.location.state===undefined||this.props.location.state===null){this.props.history.push('/');}else{var from=this.props.location.state.from;this.props.history.push(from);this.setState({from:null});}}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid align-items-center\"},/*#__PURE__*/React.createElement(NavBar,{from:this.props.location.pathname}),/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron startBox\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",placeholder:\"Enter Username\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"password\",placeholder:\"Enter Password\"})),this.props.loading?/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",role:\"status\",className:\"element\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")):/*#__PURE__*/React.createElement(\"button\",{className:\"element\",type:\"submit\",value:\"Submit\"},\" Submit \"))));}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{isAuthenticated:state.token!==null,loading:state.loading,error:state.error};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onTryAutoSignup:function onTryAutoSignup(){return dispatch(actions.authCheckedState());},onAuth:function onAuth(username,password){return dispatch(actions.authLogined(username,password));}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/lixupeng/NUS ACADS/ORBITAL/trippyy-working/trippyy/frontend/src/Containers/Login.jsx"],"names":["React","Component","Fragment","actions","connect","axios","NavBar","Spinner","Login","handleSubmit","event","preventDefault","props","onAuth","target","username","value","password","onTryAutoSignup","localStorage","token","undefined","history","push","prevProps","prevState","snapshot","isAuthenticated","location","state","from","setState","pathname","loading","mapStateToProps","error","mapDispatchToProps","dispatch","authCheckedState","authLogined"],"mappings":"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","sourcesContent":["// Basic Imports\nimport React, { Component, Fragment } from \"react\";\n// -------------------------------------------------------------------------\n\n//Imports needed for redux\nimport * as actions from '../store/actions/actions';\nimport { connect } from 'react-redux';\n// -------------------------------------------------------------------------\n\nimport axios from \"axios\";\nimport NavBar from '../Components/navBar';\nimport \"./CSS/global.css\"\nimport { Spinner } from 'react-bootstrap';\n\nclass Login extends Component {\n\n    componentDidMount() {\n      //Updates login status into redux.\n      this.props.onTryAutoSignup();\n\n      //Checks if logged in, redirect to mainpage.\n      if (localStorage.token !== null && localStorage.token !== undefined) {\n        this.props.history.push('/');\n      }\n    }\n\n    //Happens upon receiving updated login information.\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        //Checks where the page came from, if legit page, then redirect to where they came from.\n        if (this.props.isAuthenticated) {\n          if (this.props.location.state === undefined || this.props.location.state === null) {\n            this.props.history.push('/');\n          } else {\n            const from = this.props.location.state.from;\n            this.props.history.push(from);\n            this.setState({from: null});\n          }\n        }\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.onAuth(event.target.username.value, event.target.password.value);\n      }\n\n    render() {\n        return (\n          <div className = \"container-fluid align-items-center\">\n              <NavBar from={this.props.location.pathname}/>\n              <div className = \"jumbotron startBox\">\n                <h1> Login</h1> \n                  <form onSubmit={this.handleSubmit}>\n                    <div className = \"element\">\n                      <input type = \"text\" name = \"username\" placeholder = \"Enter Username\" />\n                    </div>\n                    \n                    <div className = \"element\">\n                      <input type = \"text\" name = \"password\" placeholder = \"Enter Password\" />\n                    </div>\n                    {\n                      this.props.loading ? \n                        <Spinner animation=\"border\" role=\"status\" className = \"element\">\n                          <span className=\"sr-only\">Loading...</span>\n                        </Spinner>\n                      :\n                        <button className = \"element\" type=\"submit\" value = \"Submit\"> Submit </button>\n                    }\n                  </form>\n              </div>\n          </div>);\n\n    }\n\n}\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n      isAuthenticated: state.token !== null,\n\n      loading: state.loading,\n      error: state.error\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckedState()),\n        onAuth: (username, password) => dispatch(actions.authLogined(username, password)) \n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}